const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./LiveViewQuery-CiLcFBub.js","./LoadingIndicator-B3wsHRS8.js","./FullscreenManager-Crw9n3A8.js","./WebRTCView-DbyA1J2E.js","./RecordingsView-G2_lOX7M.js","./TimelineView-BL2EBl0G.js","./SettingsView-C1UOj2ir.js","./StreamsView-jvYTnmlc.js","./SystemView-DXdA9CWs.js"])))=>i.map(i=>d[i]);
var Nt=Object.freeze,Or=Object.defineProperty;var Z=(n,e)=>Nt(Or(n,"raw",{value:Nt(e||n.slice())}));(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();const $r="modulepreload",Mr=function(n,e){return new URL(n,e).href},At={},L=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){const i=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),u=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(t.map(c=>{if(c=Mr(c,r),c in At)return;At[c]=!0;const d=c.endsWith(".css"),l=d?'[rel="stylesheet"]':"";if(!!r)for(let p=i.length-1;p>=0;p--){const m=i[p];if(m.href===c&&(!d||m.rel==="stylesheet"))return}else if(document.querySelector('link[href="'.concat(c,'"]').concat(l)))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":$r,d||(h.as="script"),h.crossOrigin="",h.href=c,u&&h.setAttribute("nonce",u),document.head.appendChild(h),d)return new Promise((p,m)=>{h.addEventListener("load",p),h.addEventListener("error",()=>m(new Error("Unable to preload CSS for ".concat(c))))})}))}function o(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return s.then(i=>{for(const a of i||[])a.status==="rejected"&&o(a.reason);return e().catch(o)})};var Pe,x,Pn,le,qt,Tn,Dn,On,ct,Ze,Xe,$n,Ee={},Mn=[],Ir=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Te=Array.isArray;function K(n,e){for(var t in e)n[t]=e[t];return n}function ut(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function N(n,e,t){var r,s,o,i={};for(o in e)o=="key"?r=e[o]:o=="ref"?s=e[o]:i[o]=e[o];if(arguments.length>2&&(i.children=arguments.length>3?Pe.call(arguments,2):t),typeof n=="function"&&n.defaultProps!=null)for(o in n.defaultProps)i[o]===void 0&&(i[o]=n.defaultProps[o]);return Se(n,i,r,s,null)}function Se(n,e,t,r,s){var o={type:n,props:e,key:t,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:s==null?++Pn:s,__i:-1,__u:0};return s==null&&x.vnode!=null&&x.vnode(o),o}function dt(){return{current:null}}function V(n){return n.children}function j(n,e){this.props=n,this.context=e}function ge(n,e){if(e==null)return n.__?ge(n.__,n.__i+1):null;for(var t;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null)return t.__e;return typeof n.type=="function"?ge(n):null}function In(n){var e,t;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null){n.__e=n.__c.base=t.__e;break}return In(n)}}function et(n){(!n.__d&&(n.__d=!0)&&le.push(n)&&!Ae.__r++||qt!==x.debounceRendering)&&((qt=x.debounceRendering)||Tn)(Ae)}function Ae(){for(var n,e,t,r,s,o,i,a=1;le.length;)le.length>a&&le.sort(Dn),n=le.shift(),a=le.length,n.__d&&(t=void 0,s=(r=(e=n).__v).__e,o=[],i=[],e.__P&&((t=K({},r)).__v=r.__v+1,x.vnode&&x.vnode(t),ht(e.__P,t,r,e.__n,e.__P.namespaceURI,32&r.__u?[s]:null,o,s==null?ge(r):s,!!(32&r.__u),i),t.__v=r.__v,t.__.__k[t.__i]=t,Nn(o,t,i),t.__e!=s&&In(t)));Ae.__r=0}function Fn(n,e,t,r,s,o,i,a,u,c,d){var l,f,h,p,m,g,_=r&&r.__k||Mn,v=e.length;for(u=Fr(t,e,_,u,v),l=0;l<v;l++)(h=t.__k[l])!=null&&(f=h.__i===-1?Ee:_[h.__i]||Ee,h.__i=l,g=ht(n,h,f,s,o,i,a,u,c,d),p=h.__e,h.ref&&f.ref!=h.ref&&(f.ref&&ft(f.ref,null,h),d.push(h.ref,h.__c||p,h)),m==null&&p!=null&&(m=p),4&h.__u||f.__k===h.__k?u=Ln(h,u,n):typeof h.type=="function"&&g!==void 0?u=g:p&&(u=p.nextSibling),h.__u&=-7);return t.__e=m,u}function Fr(n,e,t,r,s){var o,i,a,u,c,d=t.length,l=d,f=0;for(n.__k=new Array(s),o=0;o<s;o++)(i=e[o])!=null&&typeof i!="boolean"&&typeof i!="function"?(u=o+f,(i=n.__k[o]=typeof i=="string"||typeof i=="number"||typeof i=="bigint"||i.constructor==String?Se(null,i,null,null,null):Te(i)?Se(V,{children:i},null,null,null):i.constructor===void 0&&i.__b>0?Se(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i).__=n,i.__b=n.__b+1,a=null,(c=i.__i=Lr(i,t,u,l))!==-1&&(l--,(a=t[c])&&(a.__u|=2)),a==null||a.__v===null?(c==-1&&(s>d?f--:s<d&&f++),typeof i.type!="function"&&(i.__u|=4)):c!=u&&(c==u-1?f--:c==u+1?f++:(c>u?f--:f++,i.__u|=4))):n.__k[o]=null;if(l)for(o=0;o<d;o++)(a=t[o])!=null&&(2&a.__u)==0&&(a.__e==r&&(r=ge(a)),qn(a,a));return r}function Ln(n,e,t){var r,s;if(typeof n.type=="function"){for(r=n.__k,s=0;r&&s<r.length;s++)r[s]&&(r[s].__=n,e=Ln(r[s],e,t));return e}n.__e!=e&&(e&&n.type&&!t.contains(e)&&(e=ge(n)),t.insertBefore(n.__e,e||null),e=n.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function z(n,e){return e=e||[],n==null||typeof n=="boolean"||(Te(n)?n.some(function(t){z(t,e)}):e.push(n)),e}function Lr(n,e,t,r){var s,o,i=n.key,a=n.type,u=e[t];if(u===null&&n.key==null||u&&i==u.key&&a===u.type&&(2&u.__u)==0)return t;if(r>(u!=null&&(2&u.__u)==0?1:0))for(s=t-1,o=t+1;s>=0||o<e.length;){if(s>=0){if((u=e[s])&&(2&u.__u)==0&&i==u.key&&a===u.type)return s;s--}if(o<e.length){if((u=e[o])&&(2&u.__u)==0&&i==u.key&&a===u.type)return o;o++}}return-1}function Ut(n,e,t){e[0]=="-"?n.setProperty(e,t==null?"":t):n[e]=t==null?"":typeof t!="number"||Ir.test(e)?t:t+"px"}function Fe(n,e,t,r,s){var o;e:if(e=="style")if(typeof t=="string")n.style.cssText=t;else{if(typeof r=="string"&&(n.style.cssText=r=""),r)for(e in r)t&&e in t||Ut(n.style,e,"");if(t)for(e in t)r&&t[e]===r[e]||Ut(n.style,e,t[e])}else if(e[0]=="o"&&e[1]=="n")o=e!=(e=e.replace(On,"$1")),e=e.toLowerCase()in n||e=="onFocusOut"||e=="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),n.l||(n.l={}),n.l[e+o]=t,t?r?t.t=r.t:(t.t=ct,n.addEventListener(e,o?Xe:Ze,o)):n.removeEventListener(e,o?Xe:Ze,o);else{if(s=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in n)try{n[e]=t==null?"":t;break e}catch(i){}typeof t=="function"||(t==null||t===!1&&e[4]!="-"?n.removeAttribute(e):n.setAttribute(e,e=="popover"&&t==1?"":t))}}function Qt(n){return function(e){if(this.l){var t=this.l[e.type+n];if(e.u==null)e.u=ct++;else if(e.u<t.t)return;return t(x.event?x.event(e):e)}}}function ht(n,e,t,r,s,o,i,a,u,c){var d,l,f,h,p,m,g,_,v,S,w,R,y,C,b,D,q,T=e.type;if(e.constructor!==void 0)return null;128&t.__u&&(u=!!(32&t.__u),o=[a=e.__e=t.__e]),(d=x.__b)&&d(e);e:if(typeof T=="function")try{if(_=e.props,v="prototype"in T&&T.prototype.render,S=(d=T.contextType)&&r[d.__c],w=d?S?S.props.value:d.__:r,t.__c?g=(l=e.__c=t.__c).__=l.__E:(v?e.__c=l=new T(_,w):(e.__c=l=new j(_,w),l.constructor=T,l.render=Ar),S&&S.sub(l),l.props=_,l.state||(l.state={}),l.context=w,l.__n=r,f=l.__d=!0,l.__h=[],l._sb=[]),v&&l.__s==null&&(l.__s=l.state),v&&T.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=K({},l.__s)),K(l.__s,T.getDerivedStateFromProps(_,l.__s))),h=l.props,p=l.state,l.__v=e,f)v&&T.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),v&&l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(v&&T.getDerivedStateFromProps==null&&_!==h&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(_,w),!l.__e&&(l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(_,l.__s,w)===!1||e.__v==t.__v)){for(e.__v!=t.__v&&(l.props=_,l.state=l.__s,l.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.some(function(k){k&&(k.__=e)}),R=0;R<l._sb.length;R++)l.__h.push(l._sb[R]);l._sb=[],l.__h.length&&i.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(_,l.__s,w),v&&l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(h,p,m)})}if(l.context=w,l.props=_,l.__P=n,l.__e=!1,y=x.__r,C=0,v){for(l.state=l.__s,l.__d=!1,y&&y(e),d=l.render(l.props,l.state,l.context),b=0;b<l._sb.length;b++)l.__h.push(l._sb[b]);l._sb=[]}else do l.__d=!1,y&&y(e),d=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++C<25);l.state=l.__s,l.getChildContext!=null&&(r=K(K({},r),l.getChildContext())),v&&!f&&l.getSnapshotBeforeUpdate!=null&&(m=l.getSnapshotBeforeUpdate(h,p)),D=d,d!=null&&d.type===V&&d.key==null&&(D=An(d.props.children)),a=Fn(n,Te(D)?D:[D],e,t,r,s,o,i,a,u,c),l.base=e.__e,e.__u&=-161,l.__h.length&&i.push(l),g&&(l.__E=l.__=null)}catch(k){if(e.__v=null,u||o!=null)if(k.then){for(e.__u|=u?160:128;a&&a.nodeType==8&&a.nextSibling;)a=a.nextSibling;o[o.indexOf(a)]=null,e.__e=a}else for(q=o.length;q--;)ut(o[q]);else e.__e=t.__e,e.__k=t.__k;x.__e(k,e,t)}else o==null&&e.__v==t.__v?(e.__k=t.__k,e.__e=t.__e):a=e.__e=Nr(t.__e,e,t,r,s,o,i,u,c);return(d=x.diffed)&&d(e),128&e.__u?void 0:a}function Nn(n,e,t){for(var r=0;r<t.length;r++)ft(t[r],t[++r],t[++r]);x.__c&&x.__c(e,n),n.some(function(s){try{n=s.__h,s.__h=[],n.some(function(o){o.call(s)})}catch(o){x.__e(o,s.__v)}})}function An(n){return typeof n!="object"||n==null?n:Te(n)?n.map(An):K({},n)}function Nr(n,e,t,r,s,o,i,a,u){var c,d,l,f,h,p,m,g=t.props,_=e.props,v=e.type;if(v=="svg"?s="http://www.w3.org/2000/svg":v=="math"?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),o!=null){for(c=0;c<o.length;c++)if((h=o[c])&&"setAttribute"in h==!!v&&(v?h.localName==v:h.nodeType==3)){n=h,o[c]=null;break}}if(n==null){if(v==null)return document.createTextNode(_);n=document.createElementNS(s,v,_.is&&_),a&&(x.__m&&x.__m(e,o),a=!1),o=null}if(v===null)g===_||a&&n.data===_||(n.data=_);else{if(o=o&&Pe.call(n.childNodes),g=t.props||Ee,!a&&o!=null)for(g={},c=0;c<n.attributes.length;c++)g[(h=n.attributes[c]).name]=h.value;for(c in g)if(h=g[c],c!="children"){if(c=="dangerouslySetInnerHTML")l=h;else if(!(c in _)){if(c=="value"&&"defaultValue"in _||c=="checked"&&"defaultChecked"in _)continue;Fe(n,c,null,h,s)}}for(c in _)h=_[c],c=="children"?f=h:c=="dangerouslySetInnerHTML"?d=h:c=="value"?p=h:c=="checked"?m=h:a&&typeof h!="function"||g[c]===h||Fe(n,c,h,g[c],s);if(d)a||l&&(d.__html===l.__html||d.__html===n.innerHTML)||(n.innerHTML=d.__html),e.__k=[];else if(l&&(n.innerHTML=""),Fn(e.type==="template"?n.content:n,Te(f)?f:[f],e,t,r,v=="foreignObject"?"http://www.w3.org/1999/xhtml":s,o,i,o?o[0]:t.__k&&ge(t,0),a,u),o!=null)for(c=o.length;c--;)ut(o[c]);a||(c="value",v=="progress"&&p==null?n.removeAttribute("value"):p!==void 0&&(p!==n[c]||v=="progress"&&!p||v=="option"&&p!==g[c])&&Fe(n,c,p,g[c],s),c="checked",m!==void 0&&m!==n[c]&&Fe(n,c,m,g[c],s))}return n}function ft(n,e,t){try{if(typeof n=="function"){var r=typeof n.__u=="function";r&&n.__u(),r&&e==null||(n.__u=n(e))}else n.current=e}catch(s){x.__e(s,t)}}function qn(n,e,t){var r,s;if(x.unmount&&x.unmount(n),(r=n.ref)&&(r.current&&r.current!==n.__e||ft(r,null,e)),(r=n.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(o){x.__e(o,e)}r.base=r.__P=null}if(r=n.__k)for(s=0;s<r.length;s++)r[s]&&qn(r[s],e,t||typeof n.type!="function");t||ut(n.__e),n.__c=n.__=n.__e=void 0}function Ar(n,e,t){return this.constructor(n,t)}function de(n,e,t){var r,s,o,i;e==document&&(e=document.documentElement),x.__&&x.__(n,e),s=(r=typeof t=="function")?null:t&&t.__k||e.__k,o=[],i=[],ht(e,n=(!r&&t||e).__k=N(V,null,[n]),s||Ee,Ee,e.namespaceURI,!r&&t?[t]:s?null:e.firstChild?Pe.call(e.childNodes):null,o,!r&&t?t:s?s.__e:e.firstChild,r,i),Nn(o,n,i)}function pt(n,e){de(n,e,pt)}function Un(n,e,t){var r,s,o,i,a=K({},n.props);for(o in n.type&&n.type.defaultProps&&(i=n.type.defaultProps),e)o=="key"?r=e[o]:o=="ref"?s=e[o]:a[o]=e[o]===void 0&&i!==void 0?i[o]:e[o];return arguments.length>2&&(a.children=arguments.length>3?Pe.call(arguments,2):t),Se(n.type,a,r||n.key,s||n.ref,null)}function fe(n){function e(t){var r,s;return this.getChildContext||(r=new Set,(s={})[e.__c]=this,this.getChildContext=function(){return s},this.componentWillUnmount=function(){r=null},this.shouldComponentUpdate=function(o){this.props.value!==o.value&&r.forEach(function(i){i.__e=!0,et(i)})},this.sub=function(o){r.add(o);var i=o.componentWillUnmount;o.componentWillUnmount=function(){r&&r.delete(o),i&&i.call(o)}}),t.children}return e.__c="__cC"+$n++,e.__=n,e.Provider=e.__l=(e.Consumer=function(t,r){return t.children(r)}).contextType=e,e}Pe=Mn.slice,x={__e:function(n,e,t,r){for(var s,o,i;e=e.__;)if((s=e.__c)&&!s.__)try{if((o=s.constructor)&&o.getDerivedStateFromError!=null&&(s.setState(o.getDerivedStateFromError(n)),i=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(n,r||{}),i=s.__d),i)return s.__E=s}catch(a){n=a}throw n}},Pn=0,j.prototype.setState=function(n,e){var t;t=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=K({},this.state),typeof n=="function"&&(n=n(K({},t),this.props)),n&&K(t,n),n!=null&&this.__v&&(e&&this._sb.push(e),et(this))},j.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),et(this))},j.prototype.render=V,le=[],Tn=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Dn=function(n,e){return n.__v.__b-e.__v.__b},Ae.__r=0,On=/(PointerCapture)$|Capture$/i,ct=0,Ze=Qt(!1),Xe=Qt(!0),$n=0;const mt=Object.freeze(Object.defineProperty({__proto__:null,Component:j,Fragment:V,cloneElement:Un,createContext:fe,createElement:N,createRef:dt,h:N,hydrate:pt,get options(){return x},render:de,toChildArray:z},Symbol.toStringTag,{value:"Module"}));var Qn=function(n,e,t,r){var s;e[0]=0;for(var o=1;o<e.length;o++){var i=e[o++],a=e[o]?(e[0]|=i?1:2,t[e[o++]]):e[++o];i===3?r[0]=a:i===4?r[1]=Object.assign(r[1]||{},a):i===5?(r[1]=r[1]||{})[e[++o]]=a:i===6?r[1][e[++o]]+=a+"":i?(s=n.apply(a,Qn(n,a,t,["",null])),r.push(s),a[0]?e[0]|=2:(e[o-2]=0,e[o]=s)):r.push(a)}return r},Ht=new Map;function qr(n){var e=Ht.get(this);return e||(e=new Map,Ht.set(this,e)),(e=Qn(this,e.get(n)||(e.set(n,e=function(t){for(var r,s,o=1,i="",a="",u=[0],c=function(f){o===1&&(f||(i=i.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?u.push(0,f,i):o===3&&(f||i)?(u.push(3,f,i),o=2):o===2&&i==="..."&&f?u.push(4,f,0):o===2&&i&&!f?u.push(5,0,!0,i):o>=5&&((i||!f&&o===5)&&(u.push(o,0,i,s),o=6),f&&(u.push(o,f,0,s),o=6)),i=""},d=0;d<t.length;d++){d&&(o===1&&c(),c(d));for(var l=0;l<t[d].length;l++)r=t[d][l],o===1?r==="<"?(c(),u=[u],o=3):i+=r:o===4?i==="--"&&r===">"?(o=1,i=""):i=r+i[0]:a?r===a?a="":i+=r:r==='"'||r==="'"?a=r:r===">"?(c(),o=1):o&&(r==="="?(o=5,s=i,i=""):r==="/"&&(o<5||t[d][l+1]===">")?(c(),o===3&&(u=u[0]),o=u,(u=u[0]).push(2,0,o),o=0):r===" "||r==="	"||r==="\n"||r==="\r"?(c(),o=2):i+=r),o===3&&i==="!--"&&(o=4,u=u[0])}return c(),u}(n)),e),arguments,[])).length>1?e:e[0]}const ue=qr.bind(N);class Wt{static generateUUID(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}constructor(){this.socket=null,this.clientId=null,this.connected=!1,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.reconnectDelay=1e3,this.handlers={},this.subscriptions=new Set,this.pendingSubscriptions=new Set,this.messageQueue=[],this.connecting=!1,this.subscriptionParams=new Map,this.clientIdCallbacks=[],this.connectionChangeListeners=[],console.log("WebSocket client initialized, waiting for server-assigned client ID"),this.connect=this.connect.bind(this),this.disconnect=this.disconnect.bind(this),this.reconnect=this.reconnect.bind(this),this.send=this.send.bind(this),this.subscribe=this.subscribe.bind(this),this.unsubscribe=this.unsubscribe.bind(this),this.handleMessage=this.handleMessage.bind(this),this.processMessageQueue=this.processMessageQueue.bind(this),this.addConnectionChangeListener=this.addConnectionChangeListener.bind(this),this.removeConnectionChangeListener=this.removeConnectionChangeListener.bind(this),this.notifyConnectionChangeListeners=this.notifyConnectionChangeListeners.bind(this),this.connect()}connect(){if(this.socket&&(this.socket.readyState===WebSocket.OPEN||this.socket.readyState===WebSocket.CONNECTING)){console.log("WebSocket already connected or connecting");return}if(this.connecting){console.log("WebSocket connection already in progress");return}this.connecting=!0;const e=window.location.protocol==="https:"?"wss:":"ws:",t="".concat(e,"//").concat(window.location.host,"/api/ws");if(console.log("Connecting to WebSocket server at ".concat(t)),typeof WebSocket>"u"){console.error("WebSocket not supported by this browser or environment"),this.connecting=!1,this.fallbackToHttp();return}try{const r=setTimeout(()=>{console.error("WebSocket connection timeout"),this.socket&&this.socket.readyState!==WebSocket.OPEN&&(this.socket.close(),this.socket=null,this.connecting=!1,this.fallbackToHttp())},1e4);this.socket=new WebSocket(t),this.socket.onopen=()=>{clearTimeout(r),console.log("WebSocket connection established"),this.connected=!0,this.connecting=!1,this.reconnectAttempts=0,this.reconnectDelay=1e3,this.notifyConnectionChangeListeners(!0),this.socket.bufferedAmount!==void 0&&console.log("Initial WebSocket buffered amount: ".concat(this.socket.bufferedAmount)),console.log("WebSocket connected, waiting for welcome message with client ID"),this.clientId&&(console.log("Using existing client ID: ".concat(this.clientId)),this.pendingSubscriptions=new Set([...this.subscriptions]),this.subscriptions.clear(),this.processPendingSubscriptions(),this.processMessageQueue())},this.socket.onmessage=s=>{try{this.handleMessage(s.data)}catch(o){console.error("Error handling WebSocket message:",o)}},this.socket.onclose=s=>{if(clearTimeout(r),console.log("WebSocket connection closed: ".concat(s.code," ").concat(s.reason)),this.connected=!1,this.connecting=!1,this.notifyConnectionChangeListeners(!1),s.code===1006&&(console.warn("WebSocket closed abnormally (code 1006), possible compatibility issue"),this.reconnectAttempts>=3)){console.warn("Multiple abnormal closures, falling back to HTTP"),this.fallbackToHttp();return}s.code!==1e3&&this.reconnect()},this.socket.onerror=s=>{console.error("WebSocket error:",s),this.connecting=!1,this.connected&&(this.connected=!1,this.notifyConnectionChangeListeners(!1)),this.reconnectAttempts++,this.reconnectAttempts>=3&&(console.warn("Multiple WebSocket errors, falling back to HTTP"),this.fallbackToHttp())}}catch(r){console.error("Error creating WebSocket:",r),this.connecting=!1,this.reconnect()}}fallbackToHttp(){console.warn("Falling back to HTTP for operations"),this.usingHttpFallback=!0,this.connected&&(this.connected=!1,this.notifyConnectionChangeListeners(!1));const e=new CustomEvent("websocket-fallback",{detail:{usingHttp:!0}});window.dispatchEvent(e),this.pendingSubscriptions.size>0&&console.log("Notifying ".concat(this.pendingSubscriptions.size," pending subscriptions about HTTP fallback"))}disconnect(){this.socket&&(this.socket.close(1e3,"Client disconnected"),this.socket=null),this.connected=!1,this.connecting=!1,this.subscriptions.clear(),this.pendingSubscriptions.clear(),this.subscriptionParams.clear(),this.messageQueue=[]}reconnect(){if(this.reconnectAttempts>=this.maxReconnectAttempts){console.log("Maximum reconnect attempts reached");return}this.reconnectAttempts++;const e=Math.min(3e4,this.reconnectDelay*Math.pow(1.5,this.reconnectAttempts-1));console.log("Reconnecting in ".concat(e,"ms (attempt ").concat(this.reconnectAttempts,"/").concat(this.maxReconnectAttempts,")")),setTimeout(()=>{this.connect()},e)}send(e,t,r){if(!this.connected)return console.log("WebSocket not connected, queueing message"),this.messageQueue.push({type:e,topic:t,payload:r}),this.connect(),!1;const s={type:e,topic:t,payload:r};try{return console.log("Sending WebSocket message:",JSON.stringify(s)),this.socket.send(JSON.stringify(s)),!0}catch(o){return console.error("Error sending WebSocket message:",o),this.messageQueue.push({type:e,topic:t,payload:r}),!1}}processMessageQueue(){if(!this.connected||this.messageQueue.length===0)return;console.log("Processing ".concat(this.messageQueue.length," queued messages"));const e=[...this.messageQueue];this.messageQueue=[];for(const t of e)this.send(t.type,t.topic,t.payload)}processPendingSubscriptions(){if(!(!this.connected||this.pendingSubscriptions.size===0)){console.log("Processing ".concat(this.pendingSubscriptions.size," pending subscriptions"));for(const e of this.pendingSubscriptions){const t=this.subscriptionParams.get(e)||{};this.subscribe(e,t)}this.pendingSubscriptions.clear()}}subscribe(e,t={}){if(!this.connected)return console.log("WebSocket not connected, queueing subscription to ".concat(e)),this.pendingSubscriptions.add(e),this.connect(),!1;this.subscriptions.has(e)&&console.log("Already subscribed to ".concat(e,", updating parameters")),console.log("Subscribing to ".concat(e," with params:"),t),this.subscriptionParams.set(e,t);const r={client_id:this.clientId,...t},s=this.send("subscribe",e,r);return s?this.subscriptions.add(e):this.pendingSubscriptions.add(e),s}unsubscribe(e){if(!this.connected)return console.log("WebSocket not connected, cannot unsubscribe from ".concat(e)),this.pendingSubscriptions.delete(e),!1;if(!this.subscriptions.has(e))return console.log("Not subscribed to ".concat(e)),!0;console.log("Unsubscribing from ".concat(e));const t=this.send("unsubscribe",e,{});return t&&(this.subscriptions.delete(e),this.subscriptionParams.delete(e)),t}handleMessage(e){console.log("Raw WebSocket message received:",e);try{const t=JSON.parse(e);if(!t.type||!t.topic){console.error("Invalid WebSocket message format:",t);return}if(console.log("Received WebSocket message: ".concat(t.type," ").concat(t.topic),t),(t.type==="progress"||t.type==="result")&&console.log("Received ".concat(t.type," message for topic ").concat(t.topic,":"),t.payload),typeof t.payload=="string")try{const o=JSON.parse(t.payload);console.log("Parsed payload for ".concat(t.type,":").concat(t.topic,":"),o),t.payload=o}catch(o){console.log("Payload for ".concat(t.type,":").concat(t.topic," is not JSON, keeping as string"))}if(t.type==="welcome"&&t.topic==="system"){console.log("Received welcome message:",t);let o=t.payload;if(console.log("Welcome payload type:",typeof o),typeof o=="string")try{o=JSON.parse(o),console.log("Parsed welcome payload:",o)}catch(i){console.error("Error parsing welcome payload as JSON:",i),console.log("Raw payload string:",o)}if(!o||!o.client_id)console.error("Welcome message missing client_id:",o);else{this.clientId=o.client_id,console.log("WebSocket client ID received from server: ".concat(this.clientId)),this.pendingSubscriptions=new Set([...this.subscriptions]),this.subscriptions.clear(),this.processPendingSubscriptions(),this.processMessageQueue(),console.log("Notifying ".concat(this.clientIdCallbacks.length," waiting operations about client ID"));const i=[...this.clientIdCallbacks];this.clientIdCallbacks=[];for(const a of i)try{a(this.clientId)}catch(u){console.error("Error in client ID callback:",u)}}return}const r="".concat(t.type,":").concat(t.topic),s=this.handlers[r]||[];for(const o of s)try{o(t.payload)}catch(i){console.error("Error in WebSocket message handler for ".concat(r,":"),i)}}catch(t){console.error("Error parsing WebSocket message:",t)}}on(e,t,r){const s="".concat(e,":").concat(t);this.handlers[s]||(this.handlers[s]=[]),this.handlers[s].push(r),e!=="welcome"&&e!=="ack"&&e!=="error"&&this.subscribe(t)}off(e,t,r){const s="".concat(e,":").concat(t);this.handlers[s]&&(r?this.handlers[s]=this.handlers[s].filter(o=>o!==r):this.handlers[s]=[],this.handlers[s].length===0&&e!=="welcome"&&e!=="ack"&&e!=="error"&&this.unsubscribe(t))}getClientId(e){return this.clientId?(e&&e(this.clientId),this.clientId):(e&&(console.log("Client ID not available yet, adding callback to queue"),this.clientIdCallbacks.push(e),!this.connected&&!this.connecting&&(console.log("Not connected, connecting now to get client ID"),this.connect())),null)}addConnectionChangeListener(e){if(typeof e!="function"){console.error("Connection change listener must be a function");return}if(!this.connectionChangeListeners.includes(e)){this.connectionChangeListeners.push(e),console.log("Added connection change listener");try{e(this.connected)}catch(t){console.error("Error in connection change listener:",t)}}}removeConnectionChangeListener(e){const t=this.connectionChangeListeners.indexOf(e);t!==-1&&(this.connectionChangeListeners.splice(t,1),console.log("Removed connection change listener"))}notifyConnectionChangeListeners(e){console.log("Notifying ".concat(this.connectionChangeListeners.length," connection change listeners: connected=").concat(e));for(const t of this.connectionChangeListeners)try{t(e)}catch(r){console.error("Error in connection change listener:",r)}}isConnected(){return this.connected}}class Bt{constructor(e){this.wsClient=e,this.topic="recordings/batch-delete",this.progressHandlers=[],this.resultHandlers=[],this.errorHandlers=[],this._httpFallbackTimeout=null,this.wsClient.subscribe(this.topic),this.wsClient.on("progress",this.topic,t=>{this.handleProgress(t)}),this.wsClient.on("result",this.topic,t=>{this.handleResult(t)}),this.wsClient.on("error",this.topic,t=>{this.handleError(t)})}deleteWithProgress(e){return new Promise((t,r)=>{if(console.log("Starting batch delete operation with params:",e),!this.wsClient.isConnected()){console.error("WebSocket not connected, attempting to connect"),this.wsClient.connect(),setTimeout(()=>{this.wsClient.isConnected()?(console.log("WebSocket connected, retrying batch delete"),this.deleteWithProgress(e).then(t).catch(r)):(console.error("WebSocket still not connected, falling back to HTTP"),typeof batchDeleteRecordingsByHttpRequest=="function"?batchDeleteRecordingsByHttpRequest(e).then(t).catch(r):r(new Error("WebSocket not connected and HTTP fallback not available")))},1e3);return}const s=i=>{console.log("Using WebSocket client ID for batch delete:",i),console.log("Registering WebSocket handlers for batch delete");const a=c=>{console.log("Batch delete result received:",c),this.wsClient.off("result",this.topic,a),console.log("Batch delete result details:",JSON.stringify(c,null,2)),this._httpFallbackTimeout&&(console.log("Clearing HTTP fallback timeout because we received a result"),clearTimeout(this._httpFallbackTimeout),this._httpFallbackTimeout=null),t(c)},u=c=>{console.error("Batch delete error received:",c),this.wsClient.off("error",this.topic,u),this._httpFallbackTimeout&&(console.log("Clearing HTTP fallback timeout because we received an error"),clearTimeout(this._httpFallbackTimeout),this._httpFallbackTimeout=null),r(new Error(c.error||"Unknown error"))};if(this.wsClient.on("result",this.topic,a),this.wsClient.on("error",this.topic,u),this.wsClient.subscriptions.has(this.topic))console.log("Already subscribed to ".concat(this.topic,", sending request immediately")),this.sendDeleteRequest(e,i,t,r,a,u);else{console.log("Subscribing to ".concat(this.topic," before sending request"));const c={client_id:i};if(console.log("Subscription payload:",c),this.wsClient.socket&&this.wsClient.socket.readyState===WebSocket.OPEN){const d={type:"subscribe",topic:this.topic,payload:c};this.wsClient.socket.send(JSON.stringify(d)),console.log("Subscription sent directly via socket")}else this.wsClient.send("subscribe",this.topic,c);this.wsClient.subscriptions.add(this.topic),setTimeout(()=>{this.sendDeleteRequest(e,i,t,r,a,u)},1e3)}},o=this.wsClient.getClientId(s);o&&s(o)})}sendDeleteRequest(e,t,r,s,o,i){if(console.log("Sending batch delete request"),!e.ids&&!e.filter){console.error("Missing ids or filter in batch delete params"),this.wsClient.off("result",this.topic,o),this.wsClient.off("error",this.topic,i),s(new Error("Missing ids or filter in batch delete params"));return}if(e.ids?console.log("Deleting ".concat(e.ids.length," recordings with IDs:"),e.ids):e.filter&&console.log("Deleting recordings with filter:",e.filter),!t||!t.startsWith("0x")){console.error("Invalid client ID format: ".concat(t,". Expected a pointer value like 0x12345678")),this.wsClient.off("result",this.topic,o),this.wsClient.off("error",this.topic,i),s(new Error("Invalid client ID format. Please try again."));return}const a={...e,client_id:t};console.log("Full request params:",JSON.stringify(a,null,2));const u={type:"request",topic:this.topic,payload:a};console.log("Complete WebSocket message:",JSON.stringify(u,null,2)),console.log("Client ID format check:",{clientId:t,startsWithHex:t.startsWith("0x"),length:t.length,isValid:t.startsWith("0x")&&t.length>2}),e.filter&&e.totalCount&&typeof window.updateBatchDeleteProgress=="function"?(console.log("Simulating initial progress update with total count:",e.totalCount),window.updateBatchDeleteProgress({current:0,total:e.totalCount,succeeded:0,failed:0,status:"Starting batch delete operation for ".concat(e.totalCount," recordings..."),complete:!1})):e.ids&&typeof window.updateBatchDeleteProgress=="function"&&(console.log("Simulating initial progress update with IDs count:",e.ids.length),window.updateBatchDeleteProgress({current:0,total:e.ids.length,succeeded:0,failed:0,status:"Starting batch delete operation for ".concat(e.ids.length," recordings..."),complete:!1}));try{if(this.wsClient.socket&&this.wsClient.socket.readyState===WebSocket.OPEN)return(!u.payload.client_id||u.payload.client_id!==t)&&(console.warn("Client ID missing or incorrect in payload, fixing it"),u.payload.client_id=t),this.wsClient.socket.send(JSON.stringify(u)),console.log("Batch delete request sent successfully via direct socket send"),this._httpFallbackTimeout=setTimeout(()=>{console.warn("No response received after 30 seconds, trying HTTP fallback"),this._httpFallbackTimeout=null,typeof batchDeleteRecordingsByHttpRequest=="function"&&(console.log("Falling back to HTTP for batch delete"),batchDeleteRecordingsByHttpRequest(e).then(r).catch(s))},3e4),!0;{const c=this.wsClient.send("request",this.topic,a);return c?console.log("Batch delete request sent successfully via send method"):(console.error("Failed to send batch delete request"),this.wsClient.off("result",this.topic,o),this.wsClient.off("error",this.topic,i),typeof batchDeleteRecordingsByHttpRequest=="function"?(console.log("Falling back to HTTP for batch delete"),batchDeleteRecordingsByHttpRequest(e).then(r).catch(s)):s(new Error("Failed to send batch delete request"))),c}}catch(c){return console.error("Error sending batch delete request:",c),this.wsClient.off("result",this.topic,o),this.wsClient.off("error",this.topic,i),s(c),!1}}handleProgress(e){console.log("Batch delete progress update received:",e);let t=e;if(typeof e=="string")try{t=JSON.parse(e),console.log("Parsed progress payload:",t)}catch(r){console.error("Error parsing progress payload:",r),t={error:"Failed to parse progress data"}}if(this._httpFallbackTimeout&&(console.log("Clearing HTTP fallback timeout because we received a progress update"),clearTimeout(this._httpFallbackTimeout),this._httpFallbackTimeout=null),typeof window.updateBatchDeleteProgress=="function"&&t)try{console.log("Directly updating progress UI with:",t),window.updateBatchDeleteProgress(t)}catch(r){console.error("Error directly updating progress UI:",r)}for(const r of this.progressHandlers)try{r(t)}catch(s){console.error("Error in progress handler:",s)}}handleResult(e){console.log("Batch delete result received:",e),this._httpFallbackTimeout&&(console.log("Clearing HTTP fallback timeout because we received a result"),clearTimeout(this._httpFallbackTimeout),this._httpFallbackTimeout=null);let t=e;if(typeof e=="string")try{t=JSON.parse(e),console.log("Parsed result payload:",t)}catch(r){console.error("Error parsing result payload:",r),t={error:"Failed to parse result data"}}if(typeof window.updateBatchDeleteProgress=="function"&&t)try{const r={current:t.total||0,total:t.total||0,succeeded:t.succeeded||0,failed:t.failed||0,status:"Batch delete operation complete",complete:!0};console.log("Updating progress UI with final result:",r),window.updateBatchDeleteProgress(r)}catch(r){console.error("Error updating progress UI from result:",r)}for(const r of this.resultHandlers)try{r(t)}catch(s){console.error("Error in result handler:",s)}}handleError(e){console.log("Batch delete error received:",e),this._httpFallbackTimeout&&(console.log("Clearing HTTP fallback timeout because we received an error"),clearTimeout(this._httpFallbackTimeout),this._httpFallbackTimeout=null);let t=e;if(typeof e=="string")try{t=JSON.parse(e),console.log("Parsed error payload:",t)}catch(r){console.error("Error parsing error payload:",r),t={error:typeof e=="string"?e:"Unknown error"}}if(typeof window.updateBatchDeleteProgress=="function")try{const r={current:0,total:0,succeeded:0,failed:0,status:"Error: ".concat(t.error||"Unknown error"),complete:!0,error:!0};console.log("Updating progress UI with error:",r),window.updateBatchDeleteProgress(r)}catch(r){console.error("Error updating progress UI from error:",r)}for(const r of this.errorHandlers)try{r(t)}catch(s){console.error("Error in error handler:",s)}}onProgress(e){return this.progressHandlers.push(e),()=>{this.progressHandlers=this.progressHandlers.filter(t=>t!==e)}}onResult(e){return this.resultHandlers.push(e),()=>{this.resultHandlers=this.resultHandlers.filter(t=>t!==e)}}onError(e){return this.errorHandlers.push(e),()=>{this.errorHandlers=this.errorHandlers.filter(t=>t!==e)}}}var G,P,ze,jt,_e=0,Hn=[],O=x,Vt=O.__b,Kt=O.__r,zt=O.diffed,Jt=O.__c,Gt=O.unmount,Yt=O.__;function pe(n,e){O.__h&&O.__h(P,n,_e||e),_e=0;var t=P.__H||(P.__H={__:[],__h:[]});return n>=t.__.length&&t.__.push({}),t.__[n]}function J(n){return _e=1,We(Wn,n)}function We(n,e,t){var r=pe(G++,2);if(r.t=n,!r.__c&&(r.__=[t?t(e):Wn(void 0,e),function(a){var u=r.__N?r.__N[0]:r.__[0],c=r.t(u,a);u!==c&&(r.__N=[c,r.__[1]],r.__c.setState({}))}],r.__c=P,!P.__f)){var s=function(a,u,c){if(!r.__c.__H)return!0;var d=r.__c.__H.__.filter(function(f){return!!f.__c});if(d.every(function(f){return!f.__N}))return!o||o.call(this,a,u,c);var l=r.__c.props!==a;return d.forEach(function(f){if(f.__N){var h=f.__[0];f.__=f.__N,f.__N=void 0,h!==f.__[0]&&(l=!0)}}),o&&o.call(this,a,u,c)||l};P.__f=!0;var o=P.shouldComponentUpdate,i=P.componentWillUpdate;P.componentWillUpdate=function(a,u,c){if(this.__e){var d=o;o=void 0,s(a,u,c),o=d}i&&i.call(this,a,u,c)},P.shouldComponentUpdate=s}return r.__N||r.__}function Y(n,e){var t=pe(G++,3);!O.__s&&bt(t.__H,e)&&(t.__=n,t.u=e,P.__H.__h.push(t))}function ve(n,e){var t=pe(G++,4);!O.__s&&bt(t.__H,e)&&(t.__=n,t.u=e,P.__h.push(t))}function gt(n){return _e=5,De(function(){return{current:n}},[])}function _t(n,e,t){_e=6,ve(function(){if(typeof n=="function"){var r=n(e());return function(){n(null),r&&typeof r=="function"&&r()}}if(n)return n.current=e(),function(){return n.current=null}},t==null?t:t.concat(n))}function De(n,e){var t=pe(G++,7);return bt(t.__H,e)&&(t.__=n(),t.__H=e,t.__h=n),t.__}function ye(n,e){return _e=8,De(function(){return n},e)}function he(n){var e=P.context[n.__c],t=pe(G++,9);return t.c=n,e?(t.__==null&&(t.__=!0,e.sub(P)),e.props.value):n.__}function yt(n,e){O.useDebugValue&&O.useDebugValue(e?e(n):n)}function Ur(n){var e=pe(G++,10),t=J();return e.__=n,P.componentDidCatch||(P.componentDidCatch=function(r,s){e.__&&e.__(r,s),t[1](r)}),[t[0],function(){t[1](void 0)}]}function vt(){var n=pe(G++,11);if(!n.__){for(var e=P.__v;e!==null&&!e.__m&&e.__!==null;)e=e.__;var t=e.__m||(e.__m=[0,0]);n.__="P"+t[0]+"-"+t[1]++}return n.__}function Qr(){for(var n;n=Hn.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(Le),n.__H.__h.forEach(tt),n.__H.__h=[]}catch(e){n.__H.__h=[],O.__e(e,n.__v)}}O.__b=function(n){P=null,Vt&&Vt(n)},O.__=function(n,e){n&&e.__k&&e.__k.__m&&(n.__m=e.__k.__m),Yt&&Yt(n,e)},O.__r=function(n){Kt&&Kt(n),G=0;var e=(P=n.__c).__H;e&&(ze===P?(e.__h=[],P.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.u=t.__N=void 0})):(e.__h.forEach(Le),e.__h.forEach(tt),e.__h=[],G=0)),ze=P},O.diffed=function(n){zt&&zt(n);var e=n.__c;e&&e.__H&&(e.__H.__h.length&&(Hn.push(e)!==1&&jt===O.requestAnimationFrame||((jt=O.requestAnimationFrame)||Hr)(Qr)),e.__H.__.forEach(function(t){t.u&&(t.__H=t.u),t.u=void 0})),ze=P=null},O.__c=function(n,e){e.some(function(t){try{t.__h.forEach(Le),t.__h=t.__h.filter(function(r){return!r.__||tt(r)})}catch(r){e.some(function(s){s.__h&&(s.__h=[])}),e=[],O.__e(r,t.__v)}}),Jt&&Jt(n,e)},O.unmount=function(n){Gt&&Gt(n);var e,t=n.__c;t&&t.__H&&(t.__H.__.forEach(function(r){try{Le(r)}catch(s){e=s}}),t.__H=void 0,e&&O.__e(e,t.__v))};var Zt=typeof requestAnimationFrame=="function";function Hr(n){var e,t=function(){clearTimeout(r),Zt&&cancelAnimationFrame(e),setTimeout(n)},r=setTimeout(t,100);Zt&&(e=requestAnimationFrame(t))}function Le(n){var e=P,t=n.__c;typeof t=="function"&&(n.__c=void 0,t()),P=e}function tt(n){var e=P;n.__c=n.__(),P=e}function bt(n,e){return!n||n.length!==e.length||e.some(function(t,r){return t!==n[r]})}function Wn(n,e){return typeof e=="function"?e(n):e}function Bn(n,e){for(var t in e)n[t]=e[t];return n}function nt(n,e){for(var t in n)if(t!=="__source"&&!(t in e))return!0;for(var r in e)if(r!=="__source"&&n[r]!==e[r])return!0;return!1}function wt(n,e){var t=e(),r=J({t:{__:t,u:e}}),s=r[0].t,o=r[1];return ve(function(){s.__=t,s.u=e,Je(s)&&o({t:s})},[n,t,e]),Y(function(){return Je(s)&&o({t:s}),n(function(){Je(s)&&o({t:s})})},[n]),t}function Je(n){var e,t,r=n.u,s=n.__;try{var o=r();return!((e=s)===(t=o)&&(e!==0||1/e==1/t)||e!=e&&t!=t)}catch(i){return!0}}function Ct(n){n()}function xt(n){return n}function St(){return[!1,Ct]}var kt=ve;function qe(n,e){this.props=n,this.context=e}function jn(n,e){function t(s){var o=this.props.ref,i=o==s.ref;return!i&&o&&(o.call?o(null):o.current=null),e?!e(this.props,s)||!i:nt(this.props,s)}function r(s){return this.shouldComponentUpdate=t,N(n,s)}return r.displayName="Memo("+(n.displayName||n.name)+")",r.prototype.isReactComponent=!0,r.__f=!0,r}(qe.prototype=new j).isPureReactComponent=!0,qe.prototype.shouldComponentUpdate=function(n,e){return nt(this.props,n)||nt(this.state,e)};var Xt=x.__b;x.__b=function(n){n.type&&n.type.__f&&n.ref&&(n.props.ref=n.ref,n.ref=null),Xt&&Xt(n)};var Wr=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function Vn(n){function e(t){var r=Bn({},t);return delete r.ref,n(r,t.ref||null)}return e.$$typeof=Wr,e.render=e,e.prototype.isReactComponent=e.__f=!0,e.displayName="ForwardRef("+(n.displayName||n.name)+")",e}var en=function(n,e){return n==null?null:z(z(n).map(e))},Kn={map:en,forEach:en,count:function(n){return n?z(n).length:0},only:function(n){var e=z(n);if(e.length!==1)throw"Children.only";return e[0]},toArray:z},Br=x.__e;x.__e=function(n,e,t,r){if(n.then){for(var s,o=e;o=o.__;)if((s=o.__c)&&s.__c)return e.__e==null&&(e.__e=t.__e,e.__k=t.__k),s.__c(n,e)}Br(n,e,t,r)};var tn=x.unmount;function zn(n,e,t){return n&&(n.__c&&n.__c.__H&&(n.__c.__H.__.forEach(function(r){typeof r.__c=="function"&&r.__c()}),n.__c.__H=null),(n=Bn({},n)).__c!=null&&(n.__c.__P===t&&(n.__c.__P=e),n.__c=null),n.__k=n.__k&&n.__k.map(function(r){return zn(r,e,t)})),n}function Jn(n,e,t){return n&&t&&(n.__v=null,n.__k=n.__k&&n.__k.map(function(r){return Jn(r,e,t)}),n.__c&&n.__c.__P===e&&(n.__e&&t.appendChild(n.__e),n.__c.__e=!0,n.__c.__P=t)),n}function ke(){this.__u=0,this.o=null,this.__b=null}function Gn(n){var e=n.__.__c;return e&&e.__a&&e.__a(n)}function Yn(n){var e,t,r;function s(o){if(e||(e=n()).then(function(i){t=i.default||i},function(i){r=i}),r)throw r;if(!t)throw e;return N(t,o)}return s.displayName="Lazy",s.__f=!0,s}function me(){this.i=null,this.l=null}x.unmount=function(n){var e=n.__c;e&&e.__R&&e.__R(),e&&32&n.__u&&(n.type=null),tn&&tn(n)},(ke.prototype=new j).__c=function(n,e){var t=e.__c,r=this;r.o==null&&(r.o=[]),r.o.push(t);var s=Gn(r.__v),o=!1,i=function(){o||(o=!0,t.__R=null,s?s(a):a())};t.__R=i;var a=function(){if(!--r.__u){if(r.state.__a){var u=r.state.__a;r.__v.__k[0]=Jn(u,u.__c.__P,u.__c.__O)}var c;for(r.setState({__a:r.__b=null});c=r.o.pop();)c.forceUpdate()}};r.__u++||32&e.__u||r.setState({__a:r.__b=r.__v.__k[0]}),n.then(i,i)},ke.prototype.componentWillUnmount=function(){this.o=[]},ke.prototype.render=function(n,e){if(this.__b){if(this.__v.__k){var t=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=zn(this.__b,t,r.__O=r.__P)}this.__b=null}var s=e.__a&&N(V,null,n.fallback);return s&&(s.__u&=-33),[N(V,null,e.__a?null:n.children),s]};var nn=function(n,e,t){if(++t[1]===t[0]&&n.l.delete(e),n.props.revealOrder&&(n.props.revealOrder[0]!=="t"||!n.l.size))for(t=n.i;t;){for(;t.length>3;)t.pop()();if(t[1]<t[0])break;n.i=t=t[2]}};function jr(n){return this.getChildContext=function(){return n.context},n.children}function Vr(n){var e=this,t=n.h;e.componentWillUnmount=function(){de(null,e.v),e.v=null,e.h=null},e.h&&e.h!==t&&e.componentWillUnmount(),e.v||(e.h=t,e.v={nodeType:1,parentNode:t,childNodes:[],contains:function(){return!0},appendChild:function(r){this.childNodes.push(r),e.h.appendChild(r)},insertBefore:function(r,s){this.childNodes.push(r),e.h.insertBefore(r,s)},removeChild:function(r){this.childNodes.splice(this.childNodes.indexOf(r)>>>1,1),e.h.removeChild(r)}}),de(N(jr,{context:e.context},n.__v),e.v)}function Zn(n,e){var t=N(Vr,{__v:n,h:e});return t.containerInfo=e,t}(me.prototype=new j).__a=function(n){var e=this,t=Gn(e.__v),r=e.l.get(n);return r[0]++,function(s){var o=function(){e.props.revealOrder?(r.push(s),nn(e,n,r)):s()};t?t(o):o()}},me.prototype.render=function(n){this.i=null,this.l=new Map;var e=z(n.children);n.revealOrder&&n.revealOrder[0]==="b"&&e.reverse();for(var t=e.length;t--;)this.l.set(e[t],this.i=[1,0,this.i]);return n.children},me.prototype.componentDidUpdate=me.prototype.componentDidMount=function(){var n=this;this.l.forEach(function(e,t){nn(n,t,e)})};var Xn=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Kr=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,zr=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Jr=/[A-Z0-9]/g,Gr=typeof document<"u",Yr=function(n){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(n)};function er(n,e,t){return e.__k==null&&(e.textContent=""),de(n,e),typeof t=="function"&&t(),n?n.__c:null}function tr(n,e,t){return pt(n,e),typeof t=="function"&&t(),n?n.__c:null}j.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(n){Object.defineProperty(j.prototype,n,{configurable:!0,get:function(){return this["UNSAFE_"+n]},set:function(e){Object.defineProperty(this,n,{configurable:!0,writable:!0,value:e})}})});var rn=x.event;function Zr(){}function Xr(){return this.cancelBubble}function es(){return this.defaultPrevented}x.event=function(n){return rn&&(n=rn(n)),n.persist=Zr,n.isPropagationStopped=Xr,n.isDefaultPrevented=es,n.nativeEvent=n};var Et,ts={enumerable:!1,configurable:!0,get:function(){return this.class}},sn=x.vnode;x.vnode=function(n){typeof n.type=="string"&&function(e){var t=e.props,r=e.type,s={},o=r.indexOf("-")===-1;for(var i in t){var a=t[i];if(!(i==="value"&&"defaultValue"in t&&a==null||Gr&&i==="children"&&r==="noscript"||i==="class"||i==="className")){var u=i.toLowerCase();i==="defaultValue"&&"value"in t&&t.value==null?i="value":i==="download"&&a===!0?a="":u==="translate"&&a==="no"?a=!1:u[0]==="o"&&u[1]==="n"?u==="ondoubleclick"?i="ondblclick":u!=="onchange"||r!=="input"&&r!=="textarea"||Yr(t.type)?u==="onfocus"?i="onfocusin":u==="onblur"?i="onfocusout":zr.test(i)&&(i=u):u=i="oninput":o&&Kr.test(i)?i=i.replace(Jr,"-$&").toLowerCase():a===null&&(a=void 0),u==="oninput"&&s[i=u]&&(i="oninputCapture"),s[i]=a}}r=="select"&&s.multiple&&Array.isArray(s.value)&&(s.value=z(t.children).forEach(function(c){c.props.selected=s.value.indexOf(c.props.value)!=-1})),r=="select"&&s.defaultValue!=null&&(s.value=z(t.children).forEach(function(c){c.props.selected=s.multiple?s.defaultValue.indexOf(c.props.value)!=-1:s.defaultValue==c.props.value})),t.class&&!t.className?(s.class=t.class,Object.defineProperty(s,"className",ts)):(t.className&&!t.class||t.class&&t.className)&&(s.class=s.className=t.className),e.props=s}(n),n.$$typeof=Xn,sn&&sn(n)};var on=x.__r;x.__r=function(n){on&&on(n),Et=n.__c};var an=x.diffed;x.diffed=function(n){an&&an(n);var e=n.props,t=n.__e;t!=null&&n.type==="textarea"&&"value"in e&&e.value!==t.value&&(t.value=e.value==null?"":e.value),Et=null};var nr={ReactCurrentDispatcher:{current:{readContext:function(n){return Et.__n[n.__c].props.value},useCallback:ye,useContext:he,useDebugValue:yt,useDeferredValue:xt,useEffect:Y,useId:vt,useImperativeHandle:_t,useInsertionEffect:kt,useLayoutEffect:ve,useMemo:De,useReducer:We,useRef:gt,useState:J,useSyncExternalStore:wt,useTransition:St}}},ns="18.3.1";function rr(n){return N.bind(null,n)}function Oe(n){return!!n&&n.$$typeof===Xn}function sr(n){return Oe(n)&&n.type===V}function or(n){return!!n&&!!n.displayName&&(typeof n.displayName=="string"||n.displayName instanceof String)&&n.displayName.startsWith("Memo(")}function ir(n){return Oe(n)?Un.apply(null,arguments):n}function ar(n){return!!n.__k&&(de(null,n),!0)}function lr(n){return n&&(n.base||n.nodeType===1&&n)||null}var cr=function(n,e){return n(e)},ur=function(n,e){return n(e)},dr=V,hr=Oe,rs={useState:J,useId:vt,useReducer:We,useEffect:Y,useLayoutEffect:ve,useInsertionEffect:kt,useTransition:St,useDeferredValue:xt,useSyncExternalStore:wt,startTransition:Ct,useRef:gt,useImperativeHandle:_t,useMemo:De,useCallback:ye,useContext:he,useDebugValue:yt,version:"18.3.1",Children:Kn,render:er,hydrate:tr,unmountComponentAtNode:ar,createPortal:Zn,createElement:N,createContext:fe,createFactory:rr,cloneElement:ir,createRef:dt,Fragment:V,isValidElement:Oe,isElement:hr,isFragment:sr,isMemo:or,findDOMNode:lr,Component:j,PureComponent:qe,memo:jn,forwardRef:Vn,flushSync:ur,unstable_batchedUpdates:cr,StrictMode:dr,Suspense:ke,SuspenseList:me,lazy:Yn,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:nr};const fr=Object.freeze(Object.defineProperty({__proto__:null,Children:Kn,Component:j,Fragment:V,PureComponent:qe,StrictMode:dr,Suspense:ke,SuspenseList:me,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:nr,cloneElement:ir,createContext:fe,createElement:N,createFactory:rr,createPortal:Zn,createRef:dt,default:rs,findDOMNode:lr,flushSync:ur,forwardRef:Vn,hydrate:tr,isElement:hr,isFragment:sr,isMemo:or,isValidElement:Oe,lazy:Yn,memo:jn,render:er,startTransition:Ct,unmountComponentAtNode:ar,unstable_batchedUpdates:cr,useCallback:ye,useContext:he,useDebugValue:yt,useDeferredValue:xt,useEffect:Y,useErrorBoundary:Ur,useId:vt,useImperativeHandle:_t,useInsertionEffect:kt,useLayoutEffect:ve,useMemo:De,useReducer:We,useRef:gt,useState:J,useSyncExternalStore:wt,useTransition:St,version:ns},Symbol.toStringTag,{value:"Module"})),ss="0.11.10";function pr(){return ss}var wn,Cn,xn;function os({activeNav:n="",version:e=""}){const[t,r]=J(""),[s,o]=J(!1);Y(()=>{const l=localStorage.getItem("auth");if(l)try{const h=atob(l).split(":")[0];r(h)}catch(f){console.error("Error decoding auth token:",f),r("User")}else r("User")},[]);const i=l=>{l.preventDefault(),localStorage.removeItem("auth"),document.cookie="auth=; Path=/; Expires=Thu, 01 Jan 1970 00:00:00 GMT; SameSite=Strict",document.cookie="session=; Path=/; Expires=Thu, 01 Jan 1970 00:00:00 GMT; SameSite=Strict",fetch("/api/auth/logout",{method:"POST"}).then(()=>{const f=document.createElement("iframe");f.style.display="none",document.body.appendChild(f),setTimeout(()=>{window.location.href="login.html?auth_required=true&logout=true"},100),f.contentWindow&&(f.contentWindow.location.href="/api/auth/verify")}).catch(()=>{window.location.href="login.html?auth_required=true&logout=true"})},a=()=>{o(!s)},c=[{id:"nav-live",href:window.location.pathname==="/"||window.location.pathname.endsWith("/")?"./":"index.html",label:"Live View"},{id:"nav-recordings",href:"recordings.html",label:"Recordings"},{id:"nav-streams",href:"streams.html",label:"Streams"},{id:"nav-settings",href:"settings.html",label:"Settings"},{id:"nav-users",href:"users.html",label:"Users"},{id:"nav-system",href:"system.html",label:"System"}],d=l=>{const f=n===l.id,h="text-white no-underline rounded transition-colors",p="px-3 py-2",m="block w-full px-4 py-3 text-left",g=f?"bg-blue-600":"hover:bg-blue-700";return ue(wn||(wn=Z(["\n      <li class=",'>\n        <a\n          href="','"\n          id=',"\n          class=","\n          onClick=","\n        >\n          ","\n        </a>\n      </li>\n    "])),s?"w-full":"mx-1",l.href,l.id,"".concat(h," ").concat(s?m:p," ").concat(g),s?a:null,l.label)};return ue(xn||(xn=Z(['\n    <header class="bg-gray-800 text-white py-2 shadow-md mb-4 w-full">\n      <div class="container mx-auto px-4 flex justify-between items-center">\n        <div class="logo flex items-center">\n          <h1 class="text-xl font-bold m-0">LightNVR</h1>\n          <span class="version text-blue-200 text-xs ml-2">v','</span>\n        </div>\n\n        <!-- Desktop Navigation -->\n        <nav class="hidden md:block">\n          <ul class="flex list-none m-0 p-0">\n            ','\n          </ul>\n        </nav>\n\n        <!-- User Menu (Desktop) -->\n        <div class="user-menu hidden md:flex items-center">\n          <span class="mr-2">','</span>\n          <a href="#" onClick=',' class="text-white no-underline hover:bg-blue-700 px-3 py-1 rounded transition-colors">Logout</a>\n        </div>\n\n        <!-- Mobile Menu Button -->\n        <button\n          class="md:hidden text-white p-2 focus:outline-none"\n          onClick=','\n          aria-label="Toggle menu"\n        >\n          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d='," />\n          </svg>\n        </button>\n      </div>\n\n      <!-- Mobile Navigation -->\n      ","\n    </header>\n  "])),e,c.map(d),t,i,a,s?"M6 18L18 6M6 6l12 12":"M4 6h16M4 12h16M4 18h16",s?ue(Cn||(Cn=Z(['\n        <div class="md:hidden mt-2 border-t border-gray-700 pt-2 container mx-auto px-4">\n          <ul class="list-none m-0 p-0 flex flex-col w-full">\n            ','\n            <li class="w-full mt-2 pt-2 border-t border-gray-700">\n              <div class="flex justify-between items-center px-4 py-2">\n                <span>','</span>\n                <a href="#" onClick=',' class="text-white no-underline hover:bg-blue-700 px-3 py-1 rounded transition-colors">Logout</a>\n              </div>\n            </li>\n          </ul>\n        </div>\n      '])),c.map(d),t,i):null)}var Sn;function is(n=""){const e=document.getElementById("header-container");if(!e)return;const t=pr();L(async()=>{const{render:r}=await Promise.resolve().then(()=>mt);return{render:r}},void 0,import.meta.url).then(({render:r})=>{r(ue(Sn||(Sn=Z(["<"," activeNav="," version="," />"])),os,n,t),e)}).catch(r=>{console.error("Error importing Preact:",r)})}var kn;function as(){const[n]=J(new Date().getFullYear());return ue(kn||(kn=Z(['\n    <footer class="bg-gray-800 text-white py-3 px-4 mt-4 shadow-inner">\n      <div class="container mx-auto flex flex-col sm:flex-row justify-between items-center">\n        <div class="text-center sm:text-left mb-2 sm:mb-0">\n          <p class="text-sm"> ',' LightNVR \n            <a href="https://github.com/opensensor/lightnvr" class="text-blue-300 hover:text-blue-100 text-sm" target="_blank" rel="noopener noreferrer">GitHub</a>\n          </p>\n          <p class="text-xs text-gray-400 mt-1 hidden sm:block">Lightweight Network Video Recorder</p>\n        </div>\n      </div>\n    </footer>\n  '])),n)}var En;function ls(){const n=document.getElementById("footer-container");if(!n)return;const e=pr();L(async()=>{const{render:t}=await Promise.resolve().then(()=>mt);return{render:t}},void 0,import.meta.url).then(({render:t})=>{t(ue(En||(En=Z(["<"," version="," />"])),as,e),n)}).catch(t=>{console.error("Error importing Preact for footer:",t)})}class be{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){const t={listener:e};return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}const Re=typeof window>"u"||"Deno"in window;function B(){}function cs(n,e){return typeof n=="function"?n(e):n}function rt(n){return typeof n=="number"&&n>=0&&n!==1/0}function mr(n,e){return Math.max(n+(e||0)-Date.now(),0)}function xe(n,e,t){return $e(n)?typeof e=="function"?{...t,queryKey:n,queryFn:e}:{...e,queryKey:n}:n}function us(n,e,t){return $e(n)?{...e,mutationKey:n}:typeof n=="function"?{...e,mutationFn:n}:{...n}}function X(n,e,t){return $e(n)?[{...e,queryKey:n},t]:[n||{},e]}function ln(n,e){const{type:t="all",exact:r,fetchStatus:s,predicate:o,queryKey:i,stale:a}=n;if($e(i)){if(r){if(e.queryHash!==Rt(i,e.options))return!1}else if(!Ue(e.queryKey,i))return!1}if(t!=="all"){const u=e.isActive();if(t==="active"&&!u||t==="inactive"&&u)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||typeof s<"u"&&s!==e.state.fetchStatus||o&&!o(e))}function cn(n,e){const{exact:t,fetching:r,predicate:s,mutationKey:o}=n;if($e(o)){if(!e.options.mutationKey)return!1;if(t){if(ce(e.options.mutationKey)!==ce(o))return!1}else if(!Ue(e.options.mutationKey,o))return!1}return!(typeof r=="boolean"&&e.state.status==="loading"!==r||s&&!s(e))}function Rt(n,e){return((e==null?void 0:e.queryKeyHashFn)||ce)(n)}function ce(n){return JSON.stringify(n,(e,t)=>ot(t)?Object.keys(t).sort().reduce((r,s)=>(r[s]=t[s],r),{}):t)}function Ue(n,e){return gr(n,e)}function gr(n,e){return n===e?!0:typeof n!=typeof e?!1:n&&e&&typeof n=="object"&&typeof e=="object"?!Object.keys(e).some(t=>!gr(n[t],e[t])):!1}function _r(n,e){if(n===e)return n;const t=un(n)&&un(e);if(t||ot(n)&&ot(e)){const r=t?n.length:Object.keys(n).length,s=t?e:Object.keys(e),o=s.length,i=t?[]:{};let a=0;for(let u=0;u<o;u++){const c=t?u:s[u];i[c]=_r(n[c],e[c]),i[c]===n[c]&&a++}return r===o&&a===r?n:i}return e}function st(n,e){if(n&&!e||e&&!n)return!1;for(const t in n)if(n[t]!==e[t])return!1;return!0}function un(n){return Array.isArray(n)&&n.length===Object.keys(n).length}function ot(n){if(!dn(n))return!1;const e=n.constructor;if(typeof e>"u")return!0;const t=e.prototype;return!(!dn(t)||!t.hasOwnProperty("isPrototypeOf"))}function dn(n){return Object.prototype.toString.call(n)==="[object Object]"}function $e(n){return Array.isArray(n)}function yr(n){return new Promise(e=>{setTimeout(e,n)})}function hn(n){yr(0).then(n)}function ds(){if(typeof AbortController=="function")return new AbortController}function it(n,e,t){return t.isDataEqual!=null&&t.isDataEqual(n,e)?n:typeof t.structuralSharing=="function"?t.structuralSharing(n,e):t.structuralSharing!==!1?_r(n,e):e}class hs extends be{constructor(){super(),this.setup=e=>{if(!Re&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),window.addEventListener("focus",t,!1),()=>{window.removeEventListener("visibilitychange",t),window.removeEventListener("focus",t)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var t;this.setup=e,(t=this.cleanup)==null||t.call(this),this.cleanup=e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()})}setFocused(e){this.focused!==e&&(this.focused=e,this.onFocus())}onFocus(){this.listeners.forEach(({listener:e})=>{e()})}isFocused(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)}}const Qe=new hs,fn=["online","offline"];class fs extends be{constructor(){super(),this.setup=e=>{if(!Re&&window.addEventListener){const t=()=>e();return fn.forEach(r=>{window.addEventListener(r,t,!1)}),()=>{fn.forEach(r=>{window.removeEventListener(r,t)})}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var t;this.setup=e,(t=this.cleanup)==null||t.call(this),this.cleanup=e(r=>{typeof r=="boolean"?this.setOnline(r):this.onOnline()})}setOnline(e){this.online!==e&&(this.online=e,this.onOnline())}onOnline(){this.listeners.forEach(({listener:e})=>{e()})}isOnline(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine}}const He=new fs;function ps(n){return Math.min(1e3*2**n,3e4)}function Be(n){return(n!=null?n:"online")==="online"?He.isOnline():!0}class vr{constructor(e){this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}}function Ne(n){return n instanceof vr}function br(n){let e=!1,t=0,r=!1,s,o,i;const a=new Promise((g,_)=>{o=g,i=_}),u=g=>{r||(h(new vr(g)),n.abort==null||n.abort())},c=()=>{e=!0},d=()=>{e=!1},l=()=>!Qe.isFocused()||n.networkMode!=="always"&&!He.isOnline(),f=g=>{r||(r=!0,n.onSuccess==null||n.onSuccess(g),s==null||s(),o(g))},h=g=>{r||(r=!0,n.onError==null||n.onError(g),s==null||s(),i(g))},p=()=>new Promise(g=>{s=_=>{const v=r||!l();return v&&g(_),v},n.onPause==null||n.onPause()}).then(()=>{s=void 0,r||n.onContinue==null||n.onContinue()}),m=()=>{if(r)return;let g;try{g=n.fn()}catch(_){g=Promise.reject(_)}Promise.resolve(g).then(f).catch(_=>{var v,S;if(r)return;const w=(v=n.retry)!=null?v:3,R=(S=n.retryDelay)!=null?S:ps,y=typeof R=="function"?R(t,_):R,C=w===!0||typeof w=="number"&&t<w||typeof w=="function"&&w(t,_);if(e||!C){h(_);return}t++,n.onFail==null||n.onFail(t,_),yr(y).then(()=>{if(l())return p()}).then(()=>{e?h(_):m()})})};return Be(n.networkMode)?m():p().then(m),{promise:a,cancel:u,continue:()=>(s==null?void 0:s())?a:Promise.resolve(),cancelRetry:c,continueRetry:d}}const Pt=console;function ms(){let n=[],e=0,t=d=>{d()},r=d=>{d()};const s=d=>{let l;e++;try{l=d()}finally{e--,e||a()}return l},o=d=>{e?n.push(d):hn(()=>{t(d)})},i=d=>(...l)=>{o(()=>{d(...l)})},a=()=>{const d=n;n=[],d.length&&hn(()=>{r(()=>{d.forEach(l=>{t(l)})})})};return{batch:s,batchCalls:i,schedule:o,setNotifyFunction:d=>{t=d},setBatchNotifyFunction:d=>{r=d}}}const M=ms();class wr{destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),rt(this.cacheTime)&&(this.gcTimeout=setTimeout(()=>{this.optionalRemove()},this.cacheTime))}updateCacheTime(e){this.cacheTime=Math.max(this.cacheTime||0,e!=null?e:Re?1/0:5*60*1e3)}clearGcTimeout(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)}}class gs extends wr{constructor(e){super(),this.abortSignalConsumed=!1,this.defaultOptions=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.cache=e.cache,this.logger=e.logger||Pt,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.initialState=e.state||_s(this.options),this.state=this.initialState,this.scheduleGc()}get meta(){return this.options.meta}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.cache.remove(this)}setData(e,t){const r=it(this.state.data,e,this.options);return this.dispatch({data:r,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),r}setState(e,t){this.dispatch({type:"setState",state:e,setStateOptions:t})}cancel(e){var t;const r=this.promise;return(t=this.retryer)==null||t.cancel(e),r?r.then(B).catch(B):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.initialState)}isActive(){return this.observers.some(e=>e.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(e=>e.getCurrentResult().isStale)}isStaleByTime(e=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!mr(this.state.dataUpdatedAt,e)}onFocus(){var e;const t=this.observers.find(r=>r.shouldFetchOnWindowFocus());t&&t.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}onOnline(){var e;const t=this.observers.find(r=>r.shouldFetchOnReconnect());t&&t.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.retryer&&(this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.scheduleGc()),this.cache.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.dispatch({type:"invalidate"})}fetch(e,t){var r,s;if(this.state.fetchStatus!=="idle"){if(this.state.dataUpdatedAt&&t!=null&&t.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var o;return(o=this.retryer)==null||o.continueRetry(),this.promise}}if(e&&this.setOptions(e),!this.options.queryFn){const h=this.observers.find(p=>p.options.queryFn);h&&this.setOptions(h.options)}Array.isArray(this.options.queryKey);const i=ds(),a={queryKey:this.queryKey,pageParam:void 0,meta:this.meta},u=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>{if(i)return this.abortSignalConsumed=!0,i.signal}})};u(a);const c=()=>this.options.queryFn?(this.abortSignalConsumed=!1,this.options.queryFn(a)):Promise.reject("Missing queryFn for queryKey '"+this.options.queryHash+"'"),d={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:c};if(u(d),(r=this.options.behavior)==null||r.onFetch(d),this.revertState=this.state,this.state.fetchStatus==="idle"||this.state.fetchMeta!==((s=d.fetchOptions)==null?void 0:s.meta)){var l;this.dispatch({type:"fetch",meta:(l=d.fetchOptions)==null?void 0:l.meta})}const f=h=>{if(Ne(h)&&h.silent||this.dispatch({type:"error",error:h}),!Ne(h)){var p,m,g,_;(p=(m=this.cache.config).onError)==null||p.call(m,h,this),(g=(_=this.cache.config).onSettled)==null||g.call(_,this.state.data,h,this)}this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.retryer=br({fn:d.fetchFn,abort:i==null?void 0:i.abort.bind(i),onSuccess:h=>{var p,m,g,_;if(typeof h>"u"){f(new Error(this.queryHash+" data is undefined"));return}this.setData(h),(p=(m=this.cache.config).onSuccess)==null||p.call(m,h,this),(g=(_=this.cache.config).onSettled)==null||g.call(_,h,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:f,onFail:(h,p)=>{this.dispatch({type:"failed",failureCount:h,error:p})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:d.options.retry,retryDelay:d.options.retryDelay,networkMode:d.options.networkMode}),this.promise=this.retryer.promise,this.promise}dispatch(e){const t=r=>{var s,o;switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:(s=e.meta)!=null?s:null,fetchStatus:Be(this.options.networkMode)?"fetching":"paused",...!r.dataUpdatedAt&&{error:null,status:"loading"}};case"success":return{...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:(o=e.dataUpdatedAt)!=null?o:Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=e.error;return Ne(i)&&i.revert&&this.revertState?{...this.revertState}:{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),M.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate(e)}),this.cache.notify({query:this,type:"updated",action:e})})}}function _s(n){const e=typeof n.initialData=="function"?n.initialData():n.initialData,t=typeof e<"u",r=t?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?r!=null?r:Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"loading",fetchStatus:"idle"}}class ys extends be{constructor(e){super(),this.config=e||{},this.queries=[],this.queriesMap={}}build(e,t,r){var s;const o=t.queryKey,i=(s=t.queryHash)!=null?s:Rt(o,t);let a=this.get(i);return a||(a=new gs({cache:this,logger:e.getLogger(),queryKey:o,queryHash:i,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(o)}),this.add(a)),a}add(e){this.queriesMap[e.queryHash]||(this.queriesMap[e.queryHash]=e,this.queries.push(e),this.notify({type:"added",query:e}))}remove(e){const t=this.queriesMap[e.queryHash];t&&(e.destroy(),this.queries=this.queries.filter(r=>r!==e),t===e&&delete this.queriesMap[e.queryHash],this.notify({type:"removed",query:e}))}clear(){M.batch(()=>{this.queries.forEach(e=>{this.remove(e)})})}get(e){return this.queriesMap[e]}getAll(){return this.queries}find(e,t){const[r]=X(e,t);return typeof r.exact>"u"&&(r.exact=!0),this.queries.find(s=>ln(r,s))}findAll(e,t){const[r]=X(e,t);return Object.keys(r).length>0?this.queries.filter(s=>ln(r,s)):this.queries}notify(e){M.batch(()=>{this.listeners.forEach(({listener:t})=>{t(e)})})}onFocus(){M.batch(()=>{this.queries.forEach(e=>{e.onFocus()})})}onOnline(){M.batch(()=>{this.queries.forEach(e=>{e.onOnline()})})}}class vs extends wr{constructor(e){super(),this.defaultOptions=e.defaultOptions,this.mutationId=e.mutationId,this.mutationCache=e.mutationCache,this.logger=e.logger||Pt,this.observers=[],this.state=e.state||Cr(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}get meta(){return this.options.meta}setState(e){this.dispatch({type:"setState",state:e})}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.mutationCache.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.observers=this.observers.filter(t=>t!==e),this.scheduleGc(),this.mutationCache.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.observers.length||(this.state.status==="loading"?this.scheduleGc():this.mutationCache.remove(this))}continue(){var e,t;return(e=(t=this.retryer)==null?void 0:t.continue())!=null?e:this.execute()}async execute(){const e=()=>{var C;return this.retryer=br({fn:()=>this.options.mutationFn?this.options.mutationFn(this.state.variables):Promise.reject("No mutationFn found"),onFail:(b,D)=>{this.dispatch({type:"failed",failureCount:b,error:D})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:(C=this.options.retry)!=null?C:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.retryer.promise},t=this.state.status==="loading";try{var r,s,o,i,a,u,c,d;if(!t){var l,f,h,p;this.dispatch({type:"loading",variables:this.options.variables}),await((l=(f=this.mutationCache.config).onMutate)==null?void 0:l.call(f,this.state.variables,this));const b=await((h=(p=this.options).onMutate)==null?void 0:h.call(p,this.state.variables));b!==this.state.context&&this.dispatch({type:"loading",context:b,variables:this.state.variables})}const C=await e();return await((r=(s=this.mutationCache.config).onSuccess)==null?void 0:r.call(s,C,this.state.variables,this.state.context,this)),await((o=(i=this.options).onSuccess)==null?void 0:o.call(i,C,this.state.variables,this.state.context)),await((a=(u=this.mutationCache.config).onSettled)==null?void 0:a.call(u,C,null,this.state.variables,this.state.context,this)),await((c=(d=this.options).onSettled)==null?void 0:c.call(d,C,null,this.state.variables,this.state.context)),this.dispatch({type:"success",data:C}),C}catch(C){try{var m,g,_,v,S,w,R,y;throw await((m=(g=this.mutationCache.config).onError)==null?void 0:m.call(g,C,this.state.variables,this.state.context,this)),await((_=(v=this.options).onError)==null?void 0:_.call(v,C,this.state.variables,this.state.context)),await((S=(w=this.mutationCache.config).onSettled)==null?void 0:S.call(w,void 0,C,this.state.variables,this.state.context,this)),await((R=(y=this.options).onSettled)==null?void 0:R.call(y,void 0,C,this.state.variables,this.state.context)),C}finally{this.dispatch({type:"error",error:C})}}}dispatch(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"loading":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!Be(this.options.networkMode),status:"loading",variables:e.variables};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"};case"setState":return{...r,...e.state}}};this.state=t(this.state),M.batch(()=>{this.observers.forEach(r=>{r.onMutationUpdate(e)}),this.mutationCache.notify({mutation:this,type:"updated",action:e})})}}function Cr(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0}}class bs extends be{constructor(e){super(),this.config=e||{},this.mutations=[],this.mutationId=0}build(e,t,r){const s=new vs({mutationCache:this,logger:e.getLogger(),mutationId:++this.mutationId,options:e.defaultMutationOptions(t),state:r,defaultOptions:t.mutationKey?e.getMutationDefaults(t.mutationKey):void 0});return this.add(s),s}add(e){this.mutations.push(e),this.notify({type:"added",mutation:e})}remove(e){this.mutations=this.mutations.filter(t=>t!==e),this.notify({type:"removed",mutation:e})}clear(){M.batch(()=>{this.mutations.forEach(e=>{this.remove(e)})})}getAll(){return this.mutations}find(e){return typeof e.exact>"u"&&(e.exact=!0),this.mutations.find(t=>cn(e,t))}findAll(e){return this.mutations.filter(t=>cn(e,t))}notify(e){M.batch(()=>{this.listeners.forEach(({listener:t})=>{t(e)})})}resumePausedMutations(){var e;return this.resuming=((e=this.resuming)!=null?e:Promise.resolve()).then(()=>{const t=this.mutations.filter(r=>r.state.isPaused);return M.batch(()=>t.reduce((r,s)=>r.then(()=>s.continue().catch(B)),Promise.resolve()))}).then(()=>{this.resuming=void 0}),this.resuming}}function ws(){return{onFetch:n=>{n.fetchFn=()=>{var e,t,r,s,o,i;const a=(e=n.fetchOptions)==null||(t=e.meta)==null?void 0:t.refetchPage,u=(r=n.fetchOptions)==null||(s=r.meta)==null?void 0:s.fetchMore,c=u==null?void 0:u.pageParam,d=(u==null?void 0:u.direction)==="forward",l=(u==null?void 0:u.direction)==="backward",f=((o=n.state.data)==null?void 0:o.pages)||[],h=((i=n.state.data)==null?void 0:i.pageParams)||[];let p=h,m=!1;const g=y=>{Object.defineProperty(y,"signal",{enumerable:!0,get:()=>{var C;if((C=n.signal)!=null&&C.aborted)m=!0;else{var b;(b=n.signal)==null||b.addEventListener("abort",()=>{m=!0})}return n.signal}})},_=n.options.queryFn||(()=>Promise.reject("Missing queryFn for queryKey '"+n.options.queryHash+"'")),v=(y,C,b,D)=>(p=D?[C,...p]:[...p,C],D?[b,...y]:[...y,b]),S=(y,C,b,D)=>{if(m)return Promise.reject("Cancelled");if(typeof b>"u"&&!C&&y.length)return Promise.resolve(y);const q={queryKey:n.queryKey,pageParam:b,meta:n.options.meta};g(q);const T=_(q);return Promise.resolve(T).then(Me=>v(y,b,Me,D))};let w;if(!f.length)w=S([]);else if(d){const y=typeof c<"u",C=y?c:pn(n.options,f);w=S(f,y,C)}else if(l){const y=typeof c<"u",C=y?c:Cs(n.options,f);w=S(f,y,C,!0)}else{p=[];const y=typeof n.options.getNextPageParam>"u";w=(a&&f[0]?a(f[0],0,f):!0)?S([],y,h[0]):Promise.resolve(v([],h[0],f[0]));for(let b=1;b<f.length;b++)w=w.then(D=>{if(a&&f[b]?a(f[b],b,f):!0){const T=y?h[b]:pn(n.options,D);return S(D,y,T)}return Promise.resolve(v(D,h[b],f[b]))})}return w.then(y=>({pages:y,pageParams:p}))}}}}function pn(n,e){return n.getNextPageParam==null?void 0:n.getNextPageParam(e[e.length-1],e)}function Cs(n,e){return n.getPreviousPageParam==null?void 0:n.getPreviousPageParam(e[0],e)}class xr{constructor(e={}){this.queryCache=e.queryCache||new ys,this.mutationCache=e.mutationCache||new bs,this.logger=e.logger||Pt,this.defaultOptions=e.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[],this.mountCount=0}mount(){this.mountCount++,this.mountCount===1&&(this.unsubscribeFocus=Qe.subscribe(()=>{Qe.isFocused()&&(this.resumePausedMutations(),this.queryCache.onFocus())}),this.unsubscribeOnline=He.subscribe(()=>{He.isOnline()&&(this.resumePausedMutations(),this.queryCache.onOnline())}))}unmount(){var e,t;this.mountCount--,this.mountCount===0&&((e=this.unsubscribeFocus)==null||e.call(this),this.unsubscribeFocus=void 0,(t=this.unsubscribeOnline)==null||t.call(this),this.unsubscribeOnline=void 0)}isFetching(e,t){const[r]=X(e,t);return r.fetchStatus="fetching",this.queryCache.findAll(r).length}isMutating(e){return this.mutationCache.findAll({...e,fetching:!0}).length}getQueryData(e,t){var r;return(r=this.queryCache.find(e,t))==null?void 0:r.state.data}ensureQueryData(e,t,r){const s=xe(e,t,r),o=this.getQueryData(s.queryKey);return o?Promise.resolve(o):this.fetchQuery(s)}getQueriesData(e){return this.getQueryCache().findAll(e).map(({queryKey:t,state:r})=>{const s=r.data;return[t,s]})}setQueryData(e,t,r){const s=this.queryCache.find(e),o=s==null?void 0:s.state.data,i=cs(t,o);if(typeof i>"u")return;const a=xe(e),u=this.defaultQueryOptions(a);return this.queryCache.build(this,u).setData(i,{...r,manual:!0})}setQueriesData(e,t,r){return M.batch(()=>this.getQueryCache().findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,r)]))}getQueryState(e,t){var r;return(r=this.queryCache.find(e,t))==null?void 0:r.state}removeQueries(e,t){const[r]=X(e,t),s=this.queryCache;M.batch(()=>{s.findAll(r).forEach(o=>{s.remove(o)})})}resetQueries(e,t,r){const[s,o]=X(e,t,r),i=this.queryCache,a={type:"active",...s};return M.batch(()=>(i.findAll(s).forEach(u=>{u.reset()}),this.refetchQueries(a,o)))}cancelQueries(e,t,r){const[s,o={}]=X(e,t,r);typeof o.revert>"u"&&(o.revert=!0);const i=M.batch(()=>this.queryCache.findAll(s).map(a=>a.cancel(o)));return Promise.all(i).then(B).catch(B)}invalidateQueries(e,t,r){const[s,o]=X(e,t,r);return M.batch(()=>{var i,a;if(this.queryCache.findAll(s).forEach(c=>{c.invalidate()}),s.refetchType==="none")return Promise.resolve();const u={...s,type:(i=(a=s.refetchType)!=null?a:s.type)!=null?i:"active"};return this.refetchQueries(u,o)})}refetchQueries(e,t,r){const[s,o]=X(e,t,r),i=M.batch(()=>this.queryCache.findAll(s).filter(u=>!u.isDisabled()).map(u=>{var c;return u.fetch(void 0,{...o,cancelRefetch:(c=o==null?void 0:o.cancelRefetch)!=null?c:!0,meta:{refetchPage:s.refetchPage}})}));let a=Promise.all(i).then(B);return o!=null&&o.throwOnError||(a=a.catch(B)),a}fetchQuery(e,t,r){const s=xe(e,t,r),o=this.defaultQueryOptions(s);typeof o.retry>"u"&&(o.retry=!1);const i=this.queryCache.build(this,o);return i.isStaleByTime(o.staleTime)?i.fetch(o):Promise.resolve(i.state.data)}prefetchQuery(e,t,r){return this.fetchQuery(e,t,r).then(B).catch(B)}fetchInfiniteQuery(e,t,r){const s=xe(e,t,r);return s.behavior=ws(),this.fetchQuery(s)}prefetchInfiniteQuery(e,t,r){return this.fetchInfiniteQuery(e,t,r).then(B).catch(B)}resumePausedMutations(){return this.mutationCache.resumePausedMutations()}getQueryCache(){return this.queryCache}getMutationCache(){return this.mutationCache}getLogger(){return this.logger}getDefaultOptions(){return this.defaultOptions}setDefaultOptions(e){this.defaultOptions=e}setQueryDefaults(e,t){const r=this.queryDefaults.find(s=>ce(e)===ce(s.queryKey));r?r.defaultOptions=t:this.queryDefaults.push({queryKey:e,defaultOptions:t})}getQueryDefaults(e){if(!e)return;const t=this.queryDefaults.find(r=>Ue(e,r.queryKey));return t==null?void 0:t.defaultOptions}setMutationDefaults(e,t){const r=this.mutationDefaults.find(s=>ce(e)===ce(s.mutationKey));r?r.defaultOptions=t:this.mutationDefaults.push({mutationKey:e,defaultOptions:t})}getMutationDefaults(e){if(!e)return;const t=this.mutationDefaults.find(r=>Ue(e,r.mutationKey));return t==null?void 0:t.defaultOptions}defaultQueryOptions(e){if(e!=null&&e._defaulted)return e;const t={...this.defaultOptions.queries,...this.getQueryDefaults(e==null?void 0:e.queryKey),...e,_defaulted:!0};return!t.queryHash&&t.queryKey&&(t.queryHash=Rt(t.queryKey,t)),typeof t.refetchOnReconnect>"u"&&(t.refetchOnReconnect=t.networkMode!=="always"),typeof t.useErrorBoundary>"u"&&(t.useErrorBoundary=!!t.suspense),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...this.defaultOptions.mutations,...this.getMutationDefaults(e==null?void 0:e.mutationKey),...e,_defaulted:!0}}clear(){this.queryCache.clear(),this.mutationCache.clear()}}class xs extends be{constructor(e,t){super(),this.client=e,this.options=t,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(t)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.currentQuery.addObserver(this),mn(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return at(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return at(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(e,t){const r=this.options,s=this.currentQuery;if(this.options=this.client.defaultQueryOptions(e),st(r,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=r.queryKey),this.updateQuery();const o=this.hasListeners();o&&gn(this.currentQuery,s,this.options,r)&&this.executeFetch(),this.updateResult(t),o&&(this.currentQuery!==s||this.options.enabled!==r.enabled||this.options.staleTime!==r.staleTime)&&this.updateStaleTimeout();const i=this.computeRefetchInterval();o&&(this.currentQuery!==s||this.options.enabled!==r.enabled||i!==this.currentRefetchInterval)&&this.updateRefetchInterval(i)}getOptimisticResult(e){const t=this.client.getQueryCache().build(this.client,e),r=this.createResult(t,e);return ks(this,r,e)&&(this.currentResult=r,this.currentResultOptions=this.options,this.currentResultState=this.currentQuery.state),r}getCurrentResult(){return this.currentResult}trackResult(e){const t={};return Object.keys(e).forEach(r=>{Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(r),e[r])})}),t}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:e,...t}={}){return this.fetch({...t,meta:{refetchPage:e}})}fetchOptimistic(e){const t=this.client.defaultQueryOptions(e),r=this.client.getQueryCache().build(this.client,t);return r.isFetchingOptimistic=!0,r.fetch().then(()=>this.createResult(r,t))}fetch(e){var t;return this.executeFetch({...e,cancelRefetch:(t=e.cancelRefetch)!=null?t:!0}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(e){this.updateQuery();let t=this.currentQuery.fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(B)),t}updateStaleTimeout(){if(this.clearStaleTimeout(),Re||this.currentResult.isStale||!rt(this.options.staleTime))return;const t=mr(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},t)}computeRefetchInterval(){var e;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(e=this.options.refetchInterval)!=null?e:!1}updateRefetchInterval(e){this.clearRefetchInterval(),this.currentRefetchInterval=e,!(Re||this.options.enabled===!1||!rt(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||Qe.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(e,t){const r=this.currentQuery,s=this.options,o=this.currentResult,i=this.currentResultState,a=this.currentResultOptions,u=e!==r,c=u?e.state:this.currentQueryInitialState,d=u?this.currentResult:this.previousQueryResult,{state:l}=e;let{dataUpdatedAt:f,error:h,errorUpdatedAt:p,fetchStatus:m,status:g}=l,_=!1,v=!1,S;if(t._optimisticResults){const b=this.hasListeners(),D=!b&&mn(e,t),q=b&&gn(e,r,t,s);(D||q)&&(m=Be(e.options.networkMode)?"fetching":"paused",f||(g="loading")),t._optimisticResults==="isRestoring"&&(m="idle")}if(t.keepPreviousData&&!l.dataUpdatedAt&&d!=null&&d.isSuccess&&g!=="error")S=d.data,f=d.dataUpdatedAt,g=d.status,_=!0;else if(t.select&&typeof l.data<"u")if(o&&l.data===(i==null?void 0:i.data)&&t.select===this.selectFn)S=this.selectResult;else try{this.selectFn=t.select,S=t.select(l.data),S=it(o==null?void 0:o.data,S,t),this.selectResult=S,this.selectError=null}catch(b){this.selectError=b}else S=l.data;if(typeof t.placeholderData<"u"&&typeof S>"u"&&g==="loading"){let b;if(o!=null&&o.isPlaceholderData&&t.placeholderData===(a==null?void 0:a.placeholderData))b=o.data;else if(b=typeof t.placeholderData=="function"?t.placeholderData():t.placeholderData,t.select&&typeof b<"u")try{b=t.select(b),this.selectError=null}catch(D){this.selectError=D}typeof b<"u"&&(g="success",S=it(o==null?void 0:o.data,b,t),v=!0)}this.selectError&&(h=this.selectError,S=this.selectResult,p=Date.now(),g="error");const w=m==="fetching",R=g==="loading",y=g==="error";return{status:g,fetchStatus:m,isLoading:R,isSuccess:g==="success",isError:y,isInitialLoading:R&&w,data:S,dataUpdatedAt:f,error:h,errorUpdatedAt:p,failureCount:l.fetchFailureCount,failureReason:l.fetchFailureReason,errorUpdateCount:l.errorUpdateCount,isFetched:l.dataUpdateCount>0||l.errorUpdateCount>0,isFetchedAfterMount:l.dataUpdateCount>c.dataUpdateCount||l.errorUpdateCount>c.errorUpdateCount,isFetching:w,isRefetching:w&&!R,isLoadingError:y&&l.dataUpdatedAt===0,isPaused:m==="paused",isPlaceholderData:v,isPreviousData:_,isRefetchError:y&&l.dataUpdatedAt!==0,isStale:Tt(e,t),refetch:this.refetch,remove:this.remove}}updateResult(e){const t=this.currentResult,r=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,st(r,t))return;this.currentResult=r;const s={cache:!0},o=()=>{if(!t)return!0;const{notifyOnChangeProps:i}=this.options;if(i==="all"||!i&&!this.trackedProps.size)return!0;const a=new Set(i!=null?i:this.trackedProps);return this.options.useErrorBoundary&&a.add("error"),Object.keys(this.currentResult).some(u=>{const c=u;return this.currentResult[c]!==t[c]&&a.has(c)})};(e==null?void 0:e.listeners)!==!1&&o()&&(s.listeners=!0),this.notify({...s,...e})}updateQuery(){const e=this.client.getQueryCache().build(this.client,this.options);if(e===this.currentQuery)return;const t=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))}onQueryUpdate(e){const t={};e.type==="success"?t.onSuccess=!e.manual:e.type==="error"&&!Ne(e.error)&&(t.onError=!0),this.updateResult(t),this.hasListeners()&&this.updateTimers()}notify(e){M.batch(()=>{if(e.onSuccess){var t,r,s,o;(t=(r=this.options).onSuccess)==null||t.call(r,this.currentResult.data),(s=(o=this.options).onSettled)==null||s.call(o,this.currentResult.data,null)}else if(e.onError){var i,a,u,c;(i=(a=this.options).onError)==null||i.call(a,this.currentResult.error),(u=(c=this.options).onSettled)==null||u.call(c,void 0,this.currentResult.error)}e.listeners&&this.listeners.forEach(({listener:d})=>{d(this.currentResult)}),e.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}}function Ss(n,e){return e.enabled!==!1&&!n.state.dataUpdatedAt&&!(n.state.status==="error"&&e.retryOnMount===!1)}function mn(n,e){return Ss(n,e)||n.state.dataUpdatedAt>0&&at(n,e,e.refetchOnMount)}function at(n,e,t){if(e.enabled!==!1){const r=typeof t=="function"?t(n):t;return r==="always"||r!==!1&&Tt(n,e)}return!1}function gn(n,e,t,r){return t.enabled!==!1&&(n!==e||r.enabled===!1)&&(!t.suspense||n.state.status!=="error")&&Tt(n,t)}function Tt(n,e){return n.isStaleByTime(e.staleTime)}function ks(n,e,t){return t.keepPreviousData?!1:t.placeholderData!==void 0?e.isPlaceholderData:n.getCurrentResult()!==e}let Es=class extends be{constructor(e,t){super(),this.client=e,this.setOptions(t),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var t;const r=this.options;this.options=this.client.defaultMutationOptions(e),st(r,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),(t=this.currentMutation)==null||t.setOptions(this.options)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.currentMutation)==null||e.removeObserver(this)}}onMutationUpdate(e){this.updateResult();const t={listeners:!0};e.type==="success"?t.onSuccess=!0:e.type==="error"&&(t.onError=!0),this.notify(t)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(e,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:typeof e<"u"?e:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const e=this.currentMutation?this.currentMutation.state:Cr(),t={...e,isLoading:e.status==="loading",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset};this.currentResult=t}notify(e){M.batch(()=>{if(this.mutateOptions&&this.hasListeners()){if(e.onSuccess){var t,r,s,o;(t=(r=this.mutateOptions).onSuccess)==null||t.call(r,this.currentResult.data,this.currentResult.variables,this.currentResult.context),(s=(o=this.mutateOptions).onSettled)==null||s.call(o,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)}else if(e.onError){var i,a,u,c;(i=(a=this.mutateOptions).onError)==null||i.call(a,this.currentResult.error,this.currentResult.variables,this.currentResult.context),(u=(c=this.mutateOptions).onSettled)==null||u.call(c,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}}e.listeners&&this.listeners.forEach(({listener:d})=>{d(this.currentResult)})})}};function Rs(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var s=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:function(){return n[r]}})}),t}var Ge={exports:{}},Ye={};const Ps=Rs(fr);var _n;function Ts(){if(_n)return Ye;_n=1;var n=Ps;function e(l,f){return l===f&&(l!==0||1/l===1/f)||l!==l&&f!==f}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,s=n.useEffect,o=n.useLayoutEffect,i=n.useDebugValue;function a(l,f){var h=f(),p=r({inst:{value:h,getSnapshot:f}}),m=p[0].inst,g=p[1];return o(function(){m.value=h,m.getSnapshot=f,u(m)&&g({inst:m})},[l,h,f]),s(function(){return u(m)&&g({inst:m}),l(function(){u(m)&&g({inst:m})})},[l]),i(h),h}function u(l){var f=l.getSnapshot;l=l.value;try{var h=f();return!t(l,h)}catch(p){return!0}}function c(l,f){return f()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return Ye.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:d,Ye}var yn;function Ds(){return yn||(yn=1,Ge.exports=Ts()),Ge.exports}var Os=Ds();const Sr=Os.useSyncExternalStore,vn=fe(void 0),kr=fe(!1);function Er(n,e){return n||(e&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=vn),window.ReactQueryClientContext):vn)}const Dt=({context:n}={})=>{const e=he(Er(n,he(kr)));if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Ot=({client:n,children:e,context:t,contextSharing:r=!1})=>{Y(()=>(n.mount(),()=>{n.unmount()}),[n]);const s=Er(t,r);return N(kr.Provider,{value:!t&&r},N(s.Provider,{value:n},e))},Rr=fe(!1),$s=()=>he(Rr);Rr.Provider;function Ms(){let n=!1;return{clearReset:()=>{n=!1},reset:()=>{n=!0},isReset:()=>n}}const Is=fe(Ms()),Fs=()=>he(Is);function Pr(n,e){return typeof n=="function"?n(...e):!!n}const Ls=(n,e)=>{(n.suspense||n.useErrorBoundary)&&(e.isReset()||(n.retryOnMount=!1))},Ns=n=>{Y(()=>{n.clearReset()},[n])},As=({result:n,errorResetBoundary:e,useErrorBoundary:t,query:r})=>n.isError&&!e.isReset()&&!n.isFetching&&Pr(t,[n.error,r]),qs=n=>{n.suspense&&typeof n.staleTime!="number"&&(n.staleTime=1e3)},Us=(n,e)=>n.isLoading&&n.isFetching&&!e,Qs=(n,e,t)=>(n==null?void 0:n.suspense)&&Us(e,t),Hs=(n,e,t)=>e.fetchOptimistic(n).then(({data:r})=>{var s,o;(s=n.onSuccess)==null||s.call(n,r),(o=n.onSettled)==null||o.call(n,r,null)}).catch(r=>{var s,o;t.clearReset(),(s=n.onError)==null||s.call(n,r),(o=n.onSettled)==null||o.call(n,void 0,r)});function Ws(n,e){const t=Dt({context:n.context}),r=$s(),s=Fs(),o=t.defaultQueryOptions(n);o._optimisticResults=r?"isRestoring":"optimistic",o.onError&&(o.onError=M.batchCalls(o.onError)),o.onSuccess&&(o.onSuccess=M.batchCalls(o.onSuccess)),o.onSettled&&(o.onSettled=M.batchCalls(o.onSettled)),qs(o),Ls(o,s),Ns(s);const[i]=J(()=>new e(t,o)),a=i.getOptimisticResult(o);if(Sr(ye(u=>{const c=r?()=>{}:i.subscribe(M.batchCalls(u));return i.updateResult(),c},[i,r]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),Y(()=>{i.setOptions(o,{listeners:!1})},[o,i]),Qs(o,a,r))throw Hs(o,i,s);if(As({result:a,errorResetBoundary:s,useErrorBoundary:o.useErrorBoundary,query:i.getCurrentQuery()}))throw a.error;return o.notifyOnChangeProps?a:i.trackResult(a)}function bn(n,e,t){const r=xe(n,e,t);return Ws(r,xs)}function Bs(n,e,t){const r=us(n,e),s=Dt({context:r.context}),[o]=J(()=>new Es(s,r));Y(()=>{o.setOptions(r)},[o,r]);const i=Sr(ye(u=>o.subscribe(M.batchCalls(u)),[o]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),a=ye((u,c)=>{o.mutate(u,c).catch(js)},[o]);if(i.error&&Pr(o.options.useErrorBoundary,[i.error]))throw i.error;return{...i,mutate:a,mutateAsync:i.mutate}}function js(){}async function Vs(n,e={}){const{timeout:t=3e4,retries:r=1,retryDelay:s=1e3,signal:o,...i}=e;console.log("enhancedFetch: ".concat(i.method||"GET"," ").concat(n)),console.debug("enhancedFetch options:",{timeout:t,retries:r,retryDelay:s,...i});const a=new AbortController;let u;t&&(u=setTimeout(()=>{console.warn("enhancedFetch: Timeout reached for ".concat(n,", aborting request")),a.abort()},t));const c=o?Ks(o,a.signal):a.signal,d={...i,signal:c};let l,f=0;for(;f<=r;)try{console.debug("enhancedFetch: Attempt ".concat(f+1,"/").concat(r+1," for ").concat(n));const h=await fetch(n,d);if(u&&clearTimeout(u),console.log("enhancedFetch response: ".concat(h.status," ").concat(h.statusText," for ").concat(n)),!h.ok)throw new Error("HTTP error ".concat(h.status,": ").concat(h.statusText));return h}catch(h){if(l=h,u&&clearTimeout(u),console.error("enhancedFetch error (attempt ".concat(f+1,"/").concat(r+1,"):"),h),h.name==="AbortError")throw o&&o.aborted?(console.warn("enhancedFetch: Request was cancelled by external signal for ".concat(n)),new Error("Request was cancelled")):(console.warn("enhancedFetch: Request timed out for ".concat(n)),new Error("Request timed out"));if(f>=r){console.error("enhancedFetch: All ".concat(r+1," attempts failed for ").concat(n));break}if(console.log("enhancedFetch: Waiting ".concat(s,"ms before retry ").concat(f+1," for ").concat(n)),await new Promise(p=>setTimeout(p,s)),t){a.abort();const p=new AbortController;u=setTimeout(()=>{p.abort()},t)}f++}throw l}function Ks(...n){const e=new AbortController,t=()=>{e.abort(),n.forEach(r=>{r.removeEventListener("abort",t)})};return n.forEach(r=>{r.aborted?t():r.addEventListener("abort",t)}),e.signal}function Tr(){const n=new AbortController;return{signal:n.signal,abort:()=>n.abort(),isAborted:()=>n.signal.aborted}}async function $t(n,e={}){try{const t=await Vs(n,e);return console.log("fetchJSON: Parsing JSON response from ".concat(n)),await t.json()}catch(t){throw console.error("fetchJSON: Error fetching or parsing JSON from ".concat(n,":"),t),t}}const Mt=new xr({defaultOptions:{queries:{staleTime:3e4,cacheTime:5*60*1e3,retry:1,refetchOnWindowFocus:!1}}});function zs(){return Dt()}function lt(n,e,t={},r={}){return typeof n=="object"&&!Array.isArray(n)&&n!==null?bn(n):bn({queryKey:Array.isArray(n)?n:[n],queryFn:async()=>{const s=Tr(),o={...t,signal:s.signal};try{return await $t(e,o)}catch(i){throw console.error("useQuery error for ".concat(e,":"),i),i}},...r})}function Dr(n){return Bs({...n})}function Js(n,e={},t={}){return Dr({mutationFn:async r=>{const s=Tr(),o={...e,method:"POST",headers:{"Content-Type":"application/json",...e.headers},body:JSON.stringify(r),signal:s.signal};try{return await $t(n,o)}catch(i){throw console.error("usePostMutation error for ".concat(n,":"),i),i}},...t})}const so=Object.freeze(Object.defineProperty({__proto__:null,QueryClient:xr,QueryClientProvider:Ot,fetchJSON:$t,queryClient:Mt,useMutation:Dr,usePostMutation:Js,useQuery:lt,useQueryClient:zs},Symbol.toStringTag,{value:"Module"}));function Gs(){let n=document.getElementById("snapshot-modal-container");n||(n=document.createElement("div"),n.id="snapshot-modal-container",document.body.appendChild(n));const e=document.createElement("div");e.id="snapshot-preview-modal",e.className="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 hidden",e.innerHTML='\n    <div class="modal-content bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl max-h-[90vh] flex flex-col transform transition-all duration-300 ease-out scale-95 opacity-0" style="width: 90%;">\n      <div class="flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700">\n        <h3 id="snapshot-preview-title" class="text-lg font-semibold text-gray-900 dark:text-white">Snapshot</h3>\n        <button class="close text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"></button>\n      </div>\n      <div class="p-4 overflow-auto flex-grow">\n        <img id="snapshot-preview-image" class="max-w-full max-h-[70vh] mx-auto" src="" alt="Snapshot">\n      </div>\n      <div class="p-4 border-t border-gray-200 dark:border-gray-700 flex justify-end space-x-2">\n        <button id="snapshot-download-btn" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors">Download</button>\n        <button id="snapshot-close-btn" class="px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 transition-colors dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600">Close</button>\n      </div>\n    </div>\n  ',n.appendChild(e);let t=document.getElementById("video-modal-container");t||(t=document.createElement("div"),t.id="video-modal-container",document.body.appendChild(t));const r=document.createElement("div");r.id="video-preview-modal",r.className="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 hidden",r.innerHTML='\n    <div class="modal-content bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl max-h-[90vh] flex flex-col transform transition-all duration-300 ease-out scale-95 opacity-0 w-full md:w-[90%]">\n      <div class="flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700">\n        <h3 id="video-preview-title" class="text-lg font-semibold text-gray-900 dark:text-white">Video</h3>\n        <button class="close text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200"></button>\n      </div>\n      <div class="p-4 flex-grow">\n        <video id="video-preview-player" class="w-full h-auto max-w-full object-contain mx-auto" controls autoplay></video>\n      </div>\n      <div class="p-4 border-t border-gray-200 dark:border-gray-700 flex justify-end space-x-2">\n        <a id="video-download-btn" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors" href="#" download>Download</a>\n        <button id="video-close-btn" class="px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 transition-colors dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600">Close</button>\n      </div>\n    </div>\n  ',t.appendChild(r),document.addEventListener("keydown",s=>{s.key==="Escape"&&document.querySelectorAll(".fixed.inset-0.bg-black.bg-opacity-75").forEach(i=>{i.classList.contains("hidden")||i.classList.add("hidden")})})}function Ys(){L(async()=>{const{initToastContainer:n}=await import("./toast-B-CW3gRJ.js");return{initToastContainer:n}},[],import.meta.url).then(({initToastContainer:n})=>{n(!1)}).catch(n=>{if(console.error("Error loading toast module:",n),document.getElementById("status-message-styles"))return;const e=document.createElement("style");e.id="status-message-styles",e.textContent="\n      #status-message-container {\n        position: fixed;\n        top: 1rem;\n        left: 50%;\n        transform: translateX(-50%);\n        z-index: 50;\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n      }\n\n      .status-message {\n        background-color: #1f2937;\n        color: white;\n        padding: 0.5rem 1rem;\n        border-radius: 0.375rem;\n        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);\n        margin-bottom: 0.5rem;\n        transition: all 0.3s ease;\n        opacity: 0;\n        transform: translateY(-0.5rem);\n      }\n\n      .status-message.show {\n        opacity: 1;\n        transform: translateY(0);\n      }\n\n      .status-message.success {\n        background-color: #10b981;\n      }\n\n      .status-message.error {\n        background-color: #ef4444;\n      }\n\n      .status-message.warning {\n        background-color: #f59e0b;\n      }\n\n      .status-message.info {\n        background-color: #3b82f6;\n      }\n    ",document.head.appendChild(e)})}function Zs(){if(document.getElementById("modal-styles"))return;const n=document.createElement("style");n.id="modal-styles",n.textContent="\n    .modal-content {\n      transition: all 0.3s ease-out;\n    }\n\n    .modal-content.scale-95 {\n      transform: scale(0.95);\n      opacity: 0;\n    }\n\n    .modal-content.scale-100 {\n      transform: scale(1);\n      opacity: 1;\n    }\n  ",document.head.appendChild(n)}var Rn;function oo(n){const{isOpen:e,onClose:t,onConfirm:r,mode:s,count:o}=n;if(!e)return null;let i="Confirm Delete",a="Are you sure you want to delete this item?";s==="selected"?(i="Delete Selected Recordings",a="Are you sure you want to delete ".concat(o," selected recording").concat(o!==1?"s":"","?")):s==="all"&&(i="Delete All Filtered Recordings",a="Are you sure you want to delete all recordings matching the current filters? This action cannot be undone.");const u=d=>{d.key==="Escape"&&t()},c=d=>{d.target===d.currentTarget&&t()};return ue(Rn||(Rn=Z(['\n    <div\n      class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"\n      onClick=',"\n      onKeyDown=",'\n    >\n      <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 max-w-md mx-auto">\n        <div class="mb-4">\n          <h3 class="text-lg font-semibold text-gray-900 dark:text-white">','</h3>\n        </div>\n\n        <p class="text-gray-600 dark:text-gray-300 mb-6">','</p>\n\n        <div class="flex justify-end space-x-3">\n          <button\n            class="px-4 py-2 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 transition-colors dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600"\n            onClick=','\n          >\n            Cancel\n          </button>\n          <button\n            class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors"\n            onClick=',"\n          >\n            Delete\n          </button>\n        </div>\n      </div>\n    </div>\n  "])),c,u,i,a,t,r)}function io(n,e,t){const r=document.createElement("div");r.className="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",r.id="video-modal-overlay";const s=document.createElement("div");s.className="bg-gray-50 dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl flex flex-col w-full md:w-[90%]";const o=document.createElement("div");o.className="flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700";const i=document.createElement("h3");i.className="text-lg font-semibold text-gray-900 dark:text-white",i.textContent=e||"Video";const a=document.createElement("button");a.className="text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",a.innerHTML="",a.addEventListener("click",()=>{document.body.removeChild(r)}),o.appendChild(i),o.appendChild(a);const u=document.createElement("div");u.className="p-4";const c=document.createElement("video");c.src=n,c.className="w-full h-auto max-w-full object-contain mx-auto",c.controls=!0,c.autoplay=!0,u.appendChild(c);const d=document.createElement("div");d.id="recordings-controls",d.className="mx-4 mb-4 p-4 border border-green-500 rounded-lg bg-white dark:bg-gray-700 shadow-md relative z-10";const l=document.createElement("h3");l.className="text-lg font-bold text-center mb-4 text-gray-800 dark:text-white",l.textContent="PLAYBACK CONTROLS",d.appendChild(l);const f=document.createElement("div");f.className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-2";const h=document.createElement("div");h.className="border-b pb-4 md:border-b-0 md:border-r md:pr-4 md:pb-0";const p=document.createElement("h4");p.className="font-bold text-center mb-3 text-gray-700 dark:text-gray-300",p.textContent="Playback Speed",h.appendChild(p);const m=document.createElement("div");m.className="flex flex-wrap justify-center gap-2",[.25,.5,1,1.5,2,4].forEach(E=>{const I=document.createElement("button");I.textContent=E===1?"1 (Normal)":"".concat(E,""),I.className=E===1?"speed-btn px-3 py-2 rounded-full bg-green-500 text-white text-sm font-medium transition-all focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50":"speed-btn px-3 py-2 rounded-full bg-gray-200 hover:bg-gray-300 text-sm font-medium transition-all focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50",I.setAttribute("data-speed",E),I.addEventListener("click",()=>{c.playbackRate=E,m.querySelectorAll(".speed-btn").forEach($=>{$.getAttribute("data-speed")===E.toString()?($.classList.remove("bg-gray-200","hover:bg-gray-300"),$.classList.add("bg-green-500","text-white")):($.classList.remove("bg-green-500","text-white"),$.classList.add("bg-gray-200","hover:bg-gray-300"))}),_.textContent="Current Speed: ".concat(E," ").concat(E===1?"(Normal)":"")}),m.appendChild(I)}),h.appendChild(m);const _=document.createElement("div");_.id="current-speed-indicator",_.className="mt-3 text-center font-medium text-green-600 dark:text-green-400 text-sm",_.textContent="Current Speed: 1 (Normal)",h.appendChild(_),f.appendChild(h);const v=document.createElement("div");v.className="pt-4 md:pt-0 md:pl-4";const S=document.createElement("h4");S.className="font-bold text-center mb-2 text-gray-700 dark:text-gray-300",S.textContent="Detection Overlays",v.appendChild(S);const w=document.createElement("div");w.className="flex flex-col items-center gap-2";const R=document.createElement("div");R.className="flex items-center gap-2 mb-2";const y=document.createElement("input");y.type="checkbox",y.id="detection-overlay-checkbox",y.className="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600";const C=document.createElement("label");C.htmlFor="detection-overlay-checkbox",C.className="text-sm font-medium text-gray-700 dark:text-gray-300",C.textContent="Show Detection Overlays",R.appendChild(y),R.appendChild(C),w.appendChild(R);const b=document.createElement("div");b.className="flex flex-col w-full mt-2 mb-2";const D=document.createElement("label");D.htmlFor="detection-sensitivity-slider",D.className="text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",D.textContent="Detection Sensitivity";const q=document.createElement("div");q.id="detection-sensitivity-value",q.className="text-xs text-gray-600 dark:text-gray-400 text-center mb-1",q.textContent="Time Window: 2 seconds";const T=document.createElement("input");T.type="range",T.id="detection-sensitivity-slider",T.className="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700",T.min="1",T.max="10",T.step="1",T.value="2",b.appendChild(D),b.appendChild(T),b.appendChild(q),T.addEventListener("input",()=>{Ie=parseInt(T.value),q.textContent="Time Window: ".concat(Ie," second").concat(Ie!==1?"s":""),te&&ne()}),w.appendChild(b);const k=document.createElement("div");if(k.id="detection-status-indicator",k.className="text-center text-sm text-gray-600 dark:text-gray-400",k.textContent="No detections loaded",w.appendChild(k),v.appendChild(w),f.appendChild(v),d.appendChild(f),t){const E=document.createElement("div");E.className="flex justify-center mt-4 pt-2 border-t border-gray-200 dark:border-gray-700";const I=document.createElement("a");I.className="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors flex items-center text-sm",I.innerHTML='\n      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />\n      </svg>\n      Download Video\n    ',I.href=t,I.download="video-".concat(Date.now(),".mp4"),E.appendChild(I),d.appendChild(E)}const Me=document.createElement("div");Me.className="p-2";const ee=document.createElement("div");ee.className="relative",ee.style.position="relative",ee.style.width="100%",ee.style.height="100%";const F=document.createElement("canvas");F.id="detection-overlay-canvas",F.className="absolute top-0 left-0 w-full h-full pointer-events-none",F.style.position="absolute",F.style.top="0",F.style.left="0",F.style.width="100%",F.style.height="100%",F.style.pointerEvents="none",F.style.display="none",ee.appendChild(c),ee.appendChild(F),u.appendChild(ee);let H=null,U=[],te=!1,Ie=parseInt(T.value);const Ve=n.match(/\/play\/(\d+)/);if(Ve&&Ve[1]){const E=parseInt(Ve[1],10),I=document.createElement("div");I.id="query-container",I.style.display="none",document.body.appendChild(I),L(async()=>{const{render:$,h:A}=await Promise.resolve().then(()=>mt);return{render:$,h:A}},void 0,import.meta.url).then(({render:$,h:A})=>{$(A(Ot,{client:Mt},A(()=>{const{data:Q,isLoading:re,error:W}=lt(["recording",E],"/api/recordings/".concat(E));let se=!1,oe,we,Ce;Q&&Q.stream&&Q.start_time&&Q.end_time&&(H=Q,console.log("Recording data:",Q),oe=Math.floor(new Date(Q.start_time).getTime()/1e3),we=Math.floor(new Date(Q.end_time).getTime()/1e3),Ce=Q.stream,se=!0);const{data:ie,isLoading:Ft,error:Lt}=lt(["detections",Ce,oe,we],se?"/api/detection/results/".concat(Ce,"?start=").concat(oe,"&end=").concat(we):null,{},{enabled:se});return ie&&ie.detections&&(console.log("Detection data:",ie),U=ie.detections||[],k&&(U.length>0?(k.textContent="".concat(U.length," detection").concat(U.length!==1?"s":""," available"),k.className="text-center text-sm font-medium text-green-600 dark:text-green-400",y&&(y.disabled=!1)):(k.textContent="No detections found for this recording",y&&(y.disabled=!0)))),W&&console.error("Error loading recording data:",W),Lt&&(console.error("Error loading detection data:",Lt),k&&(k.textContent="Error loading detections",k.className="text-center text-sm font-medium text-red-600 dark:text-red-400"),y&&(y.disabled=!0)),null})),I)}).catch($=>{console.error("Error loading preact for data fetching:",$),fetch("/api/recordings/".concat(E)).then(A=>A.json()).then(A=>{if(H=A,H&&H.stream&&H.start_time&&H.end_time){const Ke=Math.floor(new Date(H.start_time).getTime()/1e3),Q=Math.floor(new Date(H.end_time).getTime()/1e3),re=new URLSearchParams({start:Ke,end:Q});return fetch("/api/detection/results/".concat(H.stream,"?").concat(re.toString()))}throw new Error("Recording data incomplete")}).then(A=>A.json()).then(A=>{U=A.detections||[],U.length>0?(k.textContent="".concat(U.length," detection").concat(U.length!==1?"s":""," available"),k.className="text-center text-sm font-medium text-green-600 dark:text-green-400",y.disabled=!1):(k.textContent="No detections found for this recording",y.disabled=!0)}).catch(A=>{console.error("Error fetching detection data:",A),k.textContent="Error loading detections",k.className="text-center text-sm font-medium text-red-600 dark:text-red-400",y.disabled=!0})})}y.addEventListener("change",()=>{te=y.checked,te?(F.style.display="block",ne(),k.textContent="Showing ".concat(U.length," detection").concat(U.length!==1?"s":"")):(F.style.display="none",k.textContent="".concat(U.length," detection").concat(U.length!==1?"s":""," available"))});function ne(){if(!te||!c||!F||U.length===0)return;const E=c.videoWidth,I=c.videoHeight;if(E===0||I===0){requestAnimationFrame(ne);return}F.width=E,F.height=I;const $=F.getContext("2d");$.clearRect(0,0,F.width,F.height);const A=c.currentTime;if(!H||!H.start_time)return;const Q=Math.floor(new Date(H.start_time).getTime()/1e3)+Math.floor(A),re=U.filter(W=>W.timestamp?Math.abs(W.timestamp-Q)<=Ie:!1);k&&(re.length>0?k.textContent="Showing ".concat(re.length," detection").concat(re.length!==1?"s":""," at current time"):k.textContent="No detections at current time (".concat(U.length," total)")),re.forEach(W=>{const se=W.x*E,oe=W.y*I,we=W.width*E,Ce=W.height*I;$.strokeStyle="rgba(0, 255, 0, 0.8)",$.lineWidth=2,$.strokeRect(se,oe,we,Ce),$.fillStyle="rgba(0, 0, 0, 0.7)";const ie="".concat(W.label," (").concat(Math.round(W.confidence*100),"%)"),Ft=$.measureText(ie).width+10;$.fillRect(se,oe-20,Ft,20),$.fillStyle="white",$.font="12px Arial",$.fillText(ie,se+5,oe-5)}),!c.paused&&!c.ended&&requestAnimationFrame(ne)}c.addEventListener("play",()=>{te&&ne()}),c.addEventListener("seeked",()=>{te&&ne()}),c.addEventListener("timeupdate",()=>{if(te){const E=Math.floor(c.currentTime*2)/2;c.lastDrawnTime!==E&&(c.lastDrawnTime=E,ne())}}),s.appendChild(o),s.appendChild(u),s.appendChild(d),s.appendChild(Me),r.appendChild(s),document.body.appendChild(r);const It=E=>{E.key==="Escape"&&(document.body.contains(r)&&document.body.removeChild(r),document.removeEventListener("keydown",It))};document.addEventListener("keydown",It),r.addEventListener("click",E=>{E.target===r&&document.body.removeChild(r)})}function ae(n,e="info",t=4e3){if(console.log("Showing status message: ".concat(n," (").concat(e,")")),window.showToast){window.showToast(n,e,t);return}L(async()=>{const{showStatusMessage:r}=await import("./toast-B-CW3gRJ.js");return{showStatusMessage:r}},[],import.meta.url).then(({showStatusMessage:r})=>{r(n,e,t)}).catch(r=>{console.error("Error loading toast module:",r);let s=document.getElementById("status-message-container");s||(s=document.createElement("div"),s.id="status-message-container",s.className="fixed top-4 left-1/2 transform -translate-x-1/2 z-50 flex flex-col items-center",document.body.appendChild(s));const o=document.createElement("div");let i="bg-blue-500";e==="success"?i="bg-green-500":e==="error"?i="bg-red-500":e==="warning"&&(i="bg-yellow-500"),o.className="".concat(i," text-white px-4 py-2 rounded-lg shadow-lg mb-2 transition-all duration-300 opacity-0 transform translate-y-2"),o.textContent=n,s.appendChild(o),setTimeout(()=>{o.classList.remove("opacity-0","translate-y-2")},10),setTimeout(()=>{o.classList.add("opacity-0","translate-y-2"),setTimeout(()=>{o.parentNode===s&&s.removeChild(o),s.children.length===0&&s.parentNode===document.body&&document.body.removeChild(s)},300)},t)})}function ao(n,e){const t=document.getElementById("snapshot-preview-modal");if(!t){console.error("Snapshot modal not found. Make sure setupModals() has been called.");return}const r=document.getElementById("snapshot-preview-title"),s=document.getElementById("snapshot-preview-image"),o=document.getElementById("snapshot-download-btn"),i=document.getElementById("snapshot-close-btn"),a=t.querySelectorAll(".close"),u=t.querySelector(".modal-content");r&&(r.textContent="Snapshot: ".concat(e)),t.dataset.imageData=n,t.dataset.streamName=e,s&&(s.src=n,s.style.display="block",s.onload=()=>{console.log("Snapshot image loaded successfully")},s.onerror=d=>{console.error("Error loading snapshot image:",d)});function c(){t.classList.add("hidden"),u&&(u.classList.remove("scale-100"),u.classList.add("scale-95"))}i&&(i.onclick=c),a.forEach(d=>{d.onclick=c}),t.onclick=function(d){d.target===t&&c()},document.addEventListener("keydown",function(d){d.key==="Escape"&&!t.classList.contains("hidden")&&c()}),o&&(o.onclick=function(){const d=t.dataset.imageData,l=t.dataset.streamName||e;if(!d){console.error("No image data available for download"),ae("Download failed: No image data available",5e3);return}console.log("Downloading snapshot with data URL length:",d.length);try{console.log("Using iframe download method");const h=document.createElement("canvas"),p=new Image;p.onload=function(){try{console.log("Image loaded for optimization, original dimensions:",p.width,"x",p.height);const m=p.width,g=p.height;console.log("Using original image dimensions for maximum quality:",m,"x",g),h.width=m,h.height=g;const _=h.getContext("2d");_.fillStyle="black",_.fillRect(0,0,h.width,h.height),_.drawImage(p,0,0,m,g);const v=h.toDataURL("image/jpeg",1);console.log("Optimized JPEG data URL length:",v.length);const S="snapshot_".concat(l,"_").concat(new Date().toISOString().replace(/[:.]/g,"-"),".jpg"),w=document.createElement("iframe");w.style.display="none",document.body.appendChild(w);try{const R=w.contentWindow.document;R.open(),R.write("\n                <!DOCTYPE html>\n                <html>\n                <head>\n                  <title>Downloading...</title>\n                  <script>\n                    function startDownload() {\n                      const a = document.getElementById('download-link');\n                      a.click();\n                      setTimeout(function() {\n                        window.parent.postMessage('download-complete', '*');\n                      }, 1000);\n                    }\n                  <\/script>\n                </head>\n                <body onload=\"startDownload()\">\n                  <a id=\"download-link\" href=\"".concat(v,'" download="').concat(S,'">Download</a>\n                </body>\n                </html>\n              ')),R.close(),window.addEventListener("message",function y(C){C.data==="download-complete"&&(window.removeEventListener("message",y),document.body.removeChild(w),ae("Snapshot downloaded successfully",3e3))},{once:!0}),setTimeout(()=>{document.body.contains(w)&&document.body.removeChild(w)},5e3)}catch(R){console.error("Iframe download method failed:",R),document.body.removeChild(w),f(v,S)}}catch(m){console.error("Canvas processing error:",m),ae("Download failed: Error processing image",5e3),f(d,"snapshot_".concat(l,"_").concat(new Date().toISOString().replace(/[:.]/g,"-"),".jpg"))}},p.onerror=function(m){console.error("Error loading image for optimization:",m),ae("Download failed: Could not load image",5e3),f(d,"snapshot_".concat(l,"_").concat(new Date().toISOString().replace(/[:.]/g,"-"),".jpg"))},p.src=d}catch(h){console.error("Error in snapshot download process:",h),ae("Download failed: "+h.message,5e3),f(d,"snapshot_".concat(l,"_").concat(new Date().toISOString().replace(/[:.]/g,"-"),".jpg"))}function f(h,p){console.log("Attempting direct link download");try{const m=document.createElement("a");m.href=h,m.download=p,m.target="_blank",m.rel="noopener noreferrer",document.body.appendChild(m),m.click(),setTimeout(()=>{document.body.removeChild(m)},100),ae("Download initiated",3e3)}catch(m){console.error("Direct link download failed:",m),ae("Download failed: Browser restrictions",5e3)}}}),t.classList.remove("hidden"),u&&setTimeout(()=>{u.classList.remove("scale-95","opacity-0"),u.classList.add("scale-100","opacity-100")},10)}window.React=fr;if(typeof Wt<"u"){if(window.wsClient=new Wt,console.log("WebSocket client initialized at application level"),window.wsClient){console.log("Initial WebSocket connection state:",{connected:window.wsClient.isConnected(),clientId:window.wsClient.getClientId()});const n=window.wsClient.connect;window.wsClient.connect=function(){const t=n.apply(this,arguments);if(this.socket){const r=this.socket.onopen;this.socket.onopen=a=>{console.log("WebSocket connection opened at application level"),r&&r.call(this,a)};const s=this.socket.onerror;this.socket.onerror=a=>{console.error("WebSocket error at application level:",a),s&&s.call(this,a)};const o=this.socket.onclose;this.socket.onclose=a=>{console.log("WebSocket connection closed at application level: ".concat(a.code," ").concat(a.reason)),o&&o.call(this,a)};const i=this.socket.onmessage;this.socket.onmessage=a=>{a.data.includes('"type":"welcome"')||console.log("WebSocket message received at application level"),i&&i.call(this,a)}}return t};const e=window.wsClient.handleMessage;window.wsClient.handleMessage=function(t){const r=this.clientId;e.call(this,t);const s=this.clientId;r!==s&&s&&console.log("WebSocket client ID changed at application level: ".concat(s))}}typeof Bt<"u"&&(window.batchDeleteClient=new Bt(window.wsClient),console.log("Batch delete client initialized"))}function je(n={}){let e={...n};const t=new Set;return{getState:()=>e,setState:r=>{typeof r=="function"?e=r(e):e={...e,...r},t.forEach(s=>s(e))},subscribe:r=>(t.add(r),()=>{t.delete(r)})}}je({message:"",visible:!1,timeout:null,type:"success"});je({imageUrl:"",title:""});je({videoUrl:"",title:"",downloadUrl:""});const Xs=je({client:window.wsClient||null,connected:window.wsClient?window.wsClient.isConnected():!1,clientId:window.wsClient?window.wsClient.getClientId():null});window.wsClient&&setInterval(()=>{if(window.wsClient){const n=window.wsClient.isConnected(),e=window.wsClient.getClientId();Xs.setState({connected:n,clientId:e}),!n&&!window.wsClient.connecting&&window.wsClient.reconnectAttempts<window.wsClient.maxReconnectAttempts&&(console.log("WebSocket not connected, attempting to reconnect from application level"),window.wsClient.connect())}},5e3);function eo(){const n=window.fetch;window.fetch=async function(e,t){const r=await n.apply(this,arguments);if(r.status===401&&!window.location.pathname.includes("login.html")){console.log("401 detected, redirecting to login");const s=window.location.pathname+window.location.search;window.location.href="/login.html?redirect="+encodeURIComponent(s)+"&from_redirect=true"}return r}}function to(){eo();const n=window.location.pathname.split("/").pop();let e="";switch(n){case"index.html":case"":e="nav-live";break;case"recordings.html":case"timeline.html":e="nav-recordings";break;case"streams.html":e="nav-streams";break;case"settings.html":e="nav-settings";break;case"users.html":e="nav-users";break;case"system.html":e="nav-system";break}let t=document.getElementById("app-root");if(!t){t=document.createElement("div"),t.id="app-root";const r=document.getElementById("main-content");r?r.appendChild(t):document.body.appendChild(t),console.log("Created app-root element for Preact Query provider")}de(N(Ot,{client:Mt},N("div",{id:"app-content"})),t),is(e),ls(),n==="index.html"?fetch("/api/settings").then(r=>r.json()).then(r=>{r.webrtc_disabled?L(()=>import("./LiveViewQuery-CiLcFBub.js"),__vite__mapDeps([0,1,2]),import.meta.url).then(s=>{s.loadLiveView()}).catch(s=>{console.error("Error loading LiveViewQuery:",s)}):L(()=>import("./WebRTCView-DbyA1J2E.js"),__vite__mapDeps([3,2]),import.meta.url).then(s=>{s.loadWebRTCView()}).catch(s=>{console.error("Error loading WebRTCView:",s)})}).catch(r=>{console.error("Error checking WebRTC status:",r),L(()=>import("./WebRTCView-DbyA1J2E.js"),__vite__mapDeps([3,2]),import.meta.url).then(s=>{s.loadWebRTCView()})}):n==="hls.html"?L(()=>import("./LiveViewQuery-CiLcFBub.js"),__vite__mapDeps([0,1,2]),import.meta.url).then(r=>{r.loadLiveView()}):n==="recordings.html"?L(()=>import("./RecordingsView-G2_lOX7M.js"),__vite__mapDeps([4,1]),import.meta.url).then(r=>{r.loadRecordingsView()}):n==="timeline.html"?L(()=>import("./TimelineView-BL2EBl0G.js"),__vite__mapDeps([5,1]),import.meta.url).then(r=>{r.loadTimelineView()}):n==="settings.html"?L(()=>import("./SettingsView-C1UOj2ir.js"),__vite__mapDeps([6,1]),import.meta.url).then(r=>{r.loadSettingsView()}):n==="streams.html"?L(()=>import("./StreamsView-jvYTnmlc.js"),__vite__mapDeps([7,1]),import.meta.url).then(r=>{r.loadStreamsView()}):n==="system.html"?L(()=>import("./SystemView-DXdA9CWs.js"),__vite__mapDeps([8,1]),import.meta.url).then(r=>{r.loadSystemView()}):n==="login.html"?L(()=>import("./LoginView-Cgd1H5RC.js"),[],import.meta.url).then(r=>{r.loadLoginView()}):n==="users.html"?L(()=>import("./UsersView-0vbuUTFh.js"),[],import.meta.url).then(r=>{r.loadUsersView()}):n===""&&L(()=>import("./WebRTCView-DbyA1J2E.js"),__vite__mapDeps([3,2]),import.meta.url).then(r=>{r.loadWebRTCView()}),Gs(),Ys(),Zs(),L(async()=>{const{initToastContainer:r}=await import("./toast-B-CW3gRJ.js");return{initToastContainer:r}},[],import.meta.url).then(({initToastContainer:r})=>{r(!1),console.log("Toast container initialized from preact-app.js"),window.testToastFromApp=(s="info")=>{const o="App test ".concat(s," toast at ").concat(new Date().toLocaleTimeString());return window.showToast&&window.showToast(o,s),"App toast triggered"}}).catch(r=>{console.error("Error initializing toast container:",r)})}document.addEventListener("DOMContentLoaded",to);export{gt as A,oo as D,de as E,Ot as Q,L as _,ao as a,Gs as b,Ys as c,J as d,Zs as e,zs as f,Js as g,ue as h,Dr as i,$t as j,Vs as k,io as l,ye as m,so as n,mt as p,Mt as q,ae as s,lt as u,Y as y};
//# sourceMappingURL=preact-app-BLGl_z4S.js.map
