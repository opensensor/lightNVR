; LightNVR Test Configuration File
; This configuration is used for integration testing
; Uses alternate ports and temp directories to avoid conflicts

[general]
pid_file = /tmp/lightnvr-test/lightnvr.pid
log_file = /tmp/lightnvr-test/lightnvr.log
log_level = 3  ; DEBUG level for testing
syslog_enabled = false
syslog_ident = lightnvr-test
syslog_facility = LOG_USER

[storage]
path = /tmp/lightnvr-test/recordings
max_size = 0  ; unlimited for tests
retention_days = 1  ; short retention for tests
auto_delete_oldest = true

; Test recording options
record_mp4_directly = false
mp4_path = /tmp/lightnvr-test/recordings/mp4
mp4_segment_duration = 60  ; 1 minute segments for faster test cycles
mp4_retention_days = 1

[database]
path = /tmp/lightnvr-test/lightnvr.db

[web]
port = 18080  ; Use alternate port for testing
root = ./web/dist  ; Use local dev build
auth_enabled = true
username = admin
password = admin
auth_timeout_hours = 1  ; short timeout for testing
web_thread_pool_size = 4

[streams]
max_streams = 8

[models]
path = /tmp/lightnvr-test/models

[api_detection]
url = http://localhost:9001/api/v1/detect
backend = tflite

[memory]
buffer_size = 512
use_swap = false
swap_file = /tmp/lightnvr-test/swap
swap_size = 0

[hardware]
hw_accel_enabled = false
hw_accel_device =

[go2rtc]
enabled = true
binary_path = ./go2rtc/go2rtc
config_dir = /tmp/lightnvr-test/go2rtc
api_port = 11984
rtsp_port = 18554
webrtc_port = 18555
auto_start = true  ; Let lightNVR manage go2rtc

