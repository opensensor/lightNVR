# go2rtc test configuration file
# This configuration includes virtual test streams for CI/CD and development testing
#
# Usage:
#   go2rtc -config /path/to/go2rtc-test.yaml
#
# The virtual streams use FFmpeg's lavfi filters to generate test patterns
# without requiring any real cameras. This is perfect for:
#   - CI/CD integration testing
#   - Local development without cameras
#   - Testing stream handling and recording

# Test configuration uses different ports to avoid conflicts with production
api:
  listen: :11984
  origin: "*"
  # Note: base_path removed for simpler API access during testing
  # Use base_path: /go2rtc (no trailing slash) when running behind lightNVR's reverse proxy

rtsp:
  listen: :18554

webrtc:
  listen: :18555
  ice_servers:
    - urls: [stun:stun.l.google.com:19302]
  candidates:
    - "*:18555"
    - stun:stun.l.google.com:19302

log:
  level: info

streams:
  # ==========================================================================
  # VIRTUAL TEST STREAMS
  # These streams generate video using FFmpeg's lavfi filters
  # No real cameras required - perfect for CI/CD testing
  # ==========================================================================

  # Standard test pattern with timestamp counter
  # Good for verifying basic stream connectivity and frame timing
  test_pattern:
    - ffmpeg:virtual?video&size=720#video=h264

  # SMPTE color bars - standard broadcast test pattern
  # Good for verifying color accuracy and basic video pipeline
  test_colorbars:
    - ffmpeg:virtual?video=smptebars&size=720#video=h264

  # Solid color streams - minimal CPU usage
  # Good for basic connectivity tests and low-resource environments
  test_red:
    - rtsp://localhost:18554/test_red#transport=tcp#timeout=30
    - ffmpeg:test_red#video=copy#audio=aac
    - ffmpeg:test_red#audio=opus
  test_blue: ffmpeg:virtual?video=color&color=blue&size=640x480#video=h264
  test_green: ffmpeg:virtual?video=color&color=green&size=640x480#video=h264

  # Mandelbrot fractal zoom - animated pattern
  # Good for testing motion detection (continuous motion)
  test_mandelbrot:
    - ffmpeg:virtual?video=mandelbrot&size=640x480#video=h264

  # More elaborate test pattern (testsrc2)
  # Good for higher resolution testing
  test_pattern2: ffmpeg:virtual?video=testsrc2&size=1080#video=h264

  # Low framerate stream (5 fps)
  # Good for testing edge cases with slow streams
  test_lowfps: ffmpeg:virtual?video=testsrc2&size=640x480&rate=5#video=h264

  # ==========================================================================
  # NUMBERED TEST CAMERAS 09-64 (56 additional streams)
  # All 640x480 @ 10 fps â€” solid colors for instant visual identification
  # ==========================================================================

  # Group A: Basic colors (09-16)
  test_cam_09: ffmpeg:virtual?video=color&color=yellow&size=640x480#video=h264
  test_cam_10: ffmpeg:virtual?video=color&color=cyan&size=640x480#video=h264
  test_cam_11: ffmpeg:virtual?video=color&color=magenta&size=640x480#video=h264
  test_cam_12: ffmpeg:virtual?video=color&color=orange&size=640x480#video=h264
  test_cam_13: ffmpeg:virtual?video=color&color=purple&size=640x480#video=h264
  test_cam_14: ffmpeg:virtual?video=color&color=pink&size=640x480#video=h264
  test_cam_15: ffmpeg:virtual?video=color&color=lime&size=640x480#video=h264
  test_cam_16: ffmpeg:virtual?video=color&color=teal&size=640x480#video=h264

  # Group B: Deep/dark colors (17-24)
  test_cam_17: ffmpeg:virtual?video=color&color=crimson&size=640x480#video=h264
  test_cam_18: ffmpeg:virtual?video=color&color=royalblue&size=640x480#video=h264
  test_cam_19: ffmpeg:virtual?video=color&color=limegreen&size=640x480#video=h264
  test_cam_20: ffmpeg:virtual?video=color&color=hotpink&size=640x480#video=h264
  test_cam_21: ffmpeg:virtual?video=color&color=darkturquoise&size=640x480#video=h264
  test_cam_22: ffmpeg:virtual?video=color&color=darkviolet&size=640x480#video=h264
  test_cam_23: ffmpeg:virtual?video=color&color=darkorange&size=640x480#video=h264
  test_cam_24: ffmpeg:virtual?video=color&color=seagreen&size=640x480#video=h264

  # Group C: Mid-range colors (25-32)
  test_cam_25: ffmpeg:virtual?video=color&color=dodgerblue&size=640x480#video=h264
  test_cam_26: ffmpeg:virtual?video=color&color=deeppink&size=640x480#video=h264
  test_cam_27: ffmpeg:virtual?video=color&color=springgreen&size=640x480#video=h264
  test_cam_28: ffmpeg:virtual?video=color&color=saddlebrown&size=640x480#video=h264
  test_cam_29: ffmpeg:virtual?video=color&color=slateblue&size=640x480#video=h264
  test_cam_30: ffmpeg:virtual?video=color&color=lightseagreen&size=640x480#video=h264
  test_cam_31: ffmpeg:virtual?video=color&color=firebrick&size=640x480#video=h264
  test_cam_32: ffmpeg:virtual?video=color&color=steelblue&size=640x480#video=h264

  # Group D: Earth tones (33-40)
  test_cam_33: ffmpeg:virtual?video=color&color=chocolate&size=640x480#video=h264
  test_cam_34: ffmpeg:virtual?video=color&color=darkolivegreen&size=640x480#video=h264
  test_cam_35: ffmpeg:virtual?video=color&color=darkred&size=640x480#video=h264
  test_cam_36: ffmpeg:virtual?video=color&color=darkslateblue&size=640x480#video=h264
  test_cam_37: ffmpeg:virtual?video=color&color=peru&size=640x480#video=h264
  test_cam_38: ffmpeg:virtual?video=color&color=goldenrod&size=640x480#video=h264
  test_cam_39: ffmpeg:virtual?video=color&color=cadetblue&size=640x480#video=h264
  test_cam_40: ffmpeg:virtual?video=color&color=mediumseagreen&size=640x480#video=h264

  # Group E: Pastels and muted (41-48)
  test_cam_41: ffmpeg:virtual?video=color&color=rosybrown&size=640x480#video=h264
  test_cam_42: ffmpeg:virtual?video=color&color=indigo&size=640x480#video=h264
  test_cam_43: ffmpeg:virtual?video=color&color=skyblue&size=640x480#video=h264
  test_cam_44: ffmpeg:virtual?video=color&color=sandybrown&size=640x480#video=h264
  test_cam_45: ffmpeg:virtual?video=color&color=yellowgreen&size=640x480#video=h264
  test_cam_46: ffmpeg:virtual?video=color&color=turquoise&size=640x480#video=h264
  test_cam_47: ffmpeg:virtual?video=color&color=violet&size=640x480#video=h264
  test_cam_48: ffmpeg:virtual?video=color&color=slategray&size=640x480#video=h264

  # Group F: Warm and cool tones (49-56)
  test_cam_49: ffmpeg:virtual?video=color&color=darksalmon&size=640x480#video=h264
  test_cam_50: ffmpeg:virtual?video=color&color=darkkhaki&size=640x480#video=h264
  test_cam_51: ffmpeg:virtual?video=color&color=lawngreen&size=640x480#video=h264
  test_cam_52: ffmpeg:virtual?video=color&color=salmon&size=640x480#video=h264
  test_cam_53: ffmpeg:virtual?video=color&color=cornflowerblue&size=640x480#video=h264
  test_cam_54: ffmpeg:virtual?video=color&color=burlywood&size=640x480#video=h264
  test_cam_55: ffmpeg:virtual?video=color&color=forestgreen&size=640x480#video=h264
  test_cam_56: ffmpeg:virtual?video=color&color=tomato&size=640x480#video=h264

  # Group G: Final batch (57-64)
  test_cam_57: ffmpeg:virtual?video=color&color=khaki&size=640x480#video=h264
  test_cam_58: ffmpeg:virtual?video=color&color=coral&size=640x480#video=h264
  test_cam_59: ffmpeg:virtual?video=color&color=sienna&size=640x480#video=h264
  test_cam_60: ffmpeg:virtual?video=color&color=plum&size=640x480#video=h264
  test_cam_61: ffmpeg:virtual?video=color&color=darkseagreen&size=640x480#video=h264
  test_cam_62: ffmpeg:virtual?video=color&color=mediumpurple&size=640x480#video=h264
  test_cam_63: ffmpeg:virtual?video=color&color=lightsalmon&size=640x480#video=h264
  test_cam_64: ffmpeg:virtual?video=color&color=mediumaquamarine&size=640x480#video=h264


  # ==========================================================================
  # STREAM ACCESS INFORMATION (using test ports 11984/18554/18555)
  # ==========================================================================
  #
  # RTSP URLs (for lightNVR stream configuration):
  #   rtsp://localhost:18554/test_pattern
  #   rtsp://localhost:18554/test_colorbars
  #   rtsp://localhost:18554/test_red
  #   rtsp://localhost:18554/test_blue
  #   rtsp://localhost:18554/test_green
  #   rtsp://localhost:18554/test_mandelbrot
  #   rtsp://localhost:18554/test_pattern2
  #   rtsp://localhost:18554/test_lowfps
  #
  # Web UI:
  #   http://localhost:11984/
  #
  # API:
  #   http://localhost:11984/api/streams
  #
  # ==========================================================================
  ui_test_stream_1770566410611:
    - rtsp://localhost:18554/test_pattern#transport=tcp#timeout=30
    - ffmpeg:ui_test_stream_1770566410611#video=copy#audio=aac
    - ffmpeg:ui_test_stream_1770566410611#audio=opus

preload:
  ui_test_stream_1770566410611: audio=&video=
